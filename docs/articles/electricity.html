<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="IDEEA">
<title>IDEEA: Electric power sector model • IDEEA</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="IDEEA: Electric power sector model">
<meta property="og:description" content="IDEEA">
<meta property="og:image" content="https://ideea-model.github.io/IDEEA/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-1FN9MK20PS"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1FN9MK20PS');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">IDEEA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.26.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/IDEEA.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/about.html">About</a>
    <a class="dropdown-item" href="../articles/help.html">Help</a>
    <a class="dropdown-item" href="../articles/install.html">Installation</a>
    <h6 class="dropdown-header" data-toc-skip>IDEEA model components</h6>
    <a class="dropdown-item" href="../articles/regions.html">—Regions</a>
    <a class="dropdown-item" href="../articles/data.html">—Datasets</a>
    <h6 class="dropdown-header" data-toc-skip>IDEEA model sectors</h6>
    <a class="dropdown-item" href="../articles/energy.html">—Energy</a>
    <a class="dropdown-item" href="../articles/electricity.html">—Electricity</a>
    <a class="dropdown-item" href="../articles/hydrogen.html">—Hydrogen</a>
    <a class="dropdown-item" href="../articles/ccus.html">—CCUS</a>
    <h6 class="dropdown-header" data-toc-skip>Sectors in development</h6>
    <a class="dropdown-item" href="../articles/transport.html">—Transport</a>
    <a class="dropdown-item" href="../articles/buildings.html">—Buildings</a>
    <a class="dropdown-item" href="../articles/iron_steel.html">—Iron and Stell</a>
    <h6 class="dropdown-header" data-toc-skip>—Refineries</h6>
    <h6 class="dropdown-header" data-toc-skip>—Cement and Clinker</h6>
    <h6 class="dropdown-header" data-toc-skip>Regional models</h6>
    <h6 class="dropdown-header" data-toc-skip>—Karnataka</h6>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>IDEEA in Switch (in work)</h6>
    <h6 class="dropdown-header" data-toc-skip>IDEEA in PyPSA (planned)</h6>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ideea-model/IDEEA/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>IDEEA: Electric power sector model</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ideea-model/IDEEA/blob/HEAD/vignettes/articles/electricity.Rmd" class="external-link"><code>vignettes/articles/electricity.Rmd</code></a></small>
      <div class="d-none name"><code>electricity.Rmd</code></div>
    </div>

    
    
<!-- This vignette should describe steps of building and configuring the IDEEA model from the data available with the package. A reader should understand the model structure, the sources of the data, and main assumptions. -->
<div class="section level2">
<h2 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set number of regions, currently '7' is the only option</span></span>
<span><span class="va">nreg</span> <span class="op">&lt;-</span> <span class="fl">7</span> </span>
<span><span class="va">offshore</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span> <span class="co"># should offshore regions be included</span></span>
<span><span class="va">islands</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span> <span class="co"># should islands be included (defines 5 or 7 regions)</span></span>
<span><span class="va">base_year</span> <span class="op">&lt;-</span> <span class="fl">2020</span> <span class="co"># the first year of the model (base year or `BY`)</span></span>
<span></span>
<span><span class="co"># region variable name to use in functions (e.g. `get_ideea_data`)</span></span>
<span><span class="va">regN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"reg"</span>, <span class="va">nreg</span><span class="op">)</span> </span>
<span><span class="va">regN_off</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">regN</span>, <span class="st">"_off"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://glue.tidyverse.org/" class="external-link">glue</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># if IDEEA is installed, uncomment this line to load IDEEA</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ideea-model" class="external-link">IDEEA</a></span><span class="op">)</span></span>
<span><span class="co"># if running from the IDEEA folder without installation</span></span>
<span><span class="co"># devtools::load_all(".")</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/packageDescription.html" class="external-link">packageVersion</a></span><span class="op">(</span><span class="st">"IDEEA"</span><span class="op">)</span> <span class="op">&gt;=</span> <span class="st">'0.0.09'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/progress.html" class="external-link">set_progress_bar</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># show_progress_bar(F)</span></span>
<span></span>
<span><span class="co"># See `/dev/settings.R` to configure your system</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.exists</a></span><span class="op">(</span><span class="st">"~/.ideea/settings.R"</span><span class="op">)</span><span class="op">)</span> <span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"~/.ideea/settings.R"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="regions">Regions<a class="anchor" aria-label="anchor" href="#regions"></a>
</h3>
<!-- A short desc of alternative regional division and how it affects the modeling results/accuracy and computational burden. reference to the `maps` article. -->
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gis_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ideea_map.html">get_ideea_map</a></span><span class="op">(</span><span class="va">nreg</span>, offshore <span class="op">=</span> <span class="cn">T</span>, reg_off <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">gis_sf</span><span class="op">[</span><span class="st">"reg_off"</span><span class="op">]</span>, key.width <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">lcm</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/regions-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="time-resolution">Time resolution<a class="anchor" aria-label="anchor" href="#time-resolution"></a>
</h3>
<p>Sub-annual time resolution is set via the <code>calendar</code>
object, that specifies levels of nested time-frames (such as ‘ANNUAL’,
‘MONTH’, ‘DAY’, ‘HOUR’, etc. depending on the modeling goals and decided
level of details). This structure of modeled sub-annual time resolution
is assigned by a <code>timetable</code> data.frame with columns named as
used time-frames, as well as ‘slice’ (refers to the lowest level of
‘time-slices’ with unique names, e.g. ‘d001_h15’ indicating the 1st day
of the year and the 15th hour of the day), the ‘share’ column (for the
share of the time-frame in the year), and ‘weight’ (for the weight of
the time-frame in the year, used in sampled calendars).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ideea_modules</span><span class="op">$</span><span class="va">time_tables</span><span class="op">$</span><span class="va">d365_h24</span></span>
<span><span class="co">#&gt;       ANNUAL   YDAY   HOUR    slice        share weight</span></span>
<span><span class="co">#&gt;       &lt;char&gt; &lt;char&gt; &lt;char&gt;   &lt;char&gt;        &lt;num&gt;  &lt;num&gt;</span></span>
<span><span class="co">#&gt;    1: ANNUAL   d001    h00 d001_h00 0.0001141553      1</span></span>
<span><span class="co">#&gt;    2: ANNUAL   d001    h01 d001_h01 0.0001141553      1</span></span>
<span><span class="co">#&gt;    3: ANNUAL   d001    h02 d001_h02 0.0001141553      1</span></span>
<span><span class="co">#&gt;    4: ANNUAL   d001    h03 d001_h03 0.0001141553      1</span></span>
<span><span class="co">#&gt;    5: ANNUAL   d001    h04 d001_h04 0.0001141553      1</span></span>
<span><span class="co">#&gt;   ---                                                  </span></span>
<span><span class="co">#&gt; 8756: ANNUAL   d365    h19 d365_h19 0.0001141553      1</span></span>
<span><span class="co">#&gt; 8757: ANNUAL   d365    h20 d365_h20 0.0001141553      1</span></span>
<span><span class="co">#&gt; 8758: ANNUAL   d365    h21 d365_h21 0.0001141553      1</span></span>
<span><span class="co">#&gt; 8759: ANNUAL   d365    h22 d365_h22 0.0001141553      1</span></span>
<span><span class="co">#&gt; 8760: ANNUAL   d365    h23 d365_h23 0.0001141553      1</span></span></code></pre></div>
<p>This time-table is to define a <code>calendar</code> object, that
also describes the ierarchy of time-frames and sets the sequence of the
time-slices.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">timetable_full_year</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">time_tables</span><span class="op">$</span><span class="va">d365_h24</span></span>
<span><span class="va">full_calendar_d365_h24</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/calendar.html" class="external-link">newCalendar</a></span><span class="op">(</span>timetable <span class="op">=</span> <span class="va">timetable_full_year</span><span class="op">)</span></span></code></pre></div>
<p>The model object (described below) must have the
<code>calendar</code> object with all time-frames and time-slices used
in the model. However, scenarios can be solved for a subset of the
time-slices, defined by another <code>calendar</code> object with
sub-set of time-slices. Here we define a calendar with a subset of 1 day
per month and 24 hours per each day. Therefore, the total number of
time-slices in the subset is 12 days * 24 hours = 288 time-slices
(vs. 8760 time-slices in the full calendar).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># pick days</span></span>
<span><span class="va">yday_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumsum</a></span><span class="op">(</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/days_in_month.html" class="external-link">days_in_month</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fl">16</span> <span class="co"># one day per month</span></span>
<span><span class="co"># pick hours</span></span>
<span><span class="va">hour_sample</span> <span class="op">&lt;-</span> <span class="fl">0</span><span class="op">:</span><span class="fl">23</span> <span class="co"># all 24 hours</span></span>
<span></span>
<span><span class="va">timetable_subset</span> <span class="op">&lt;-</span> <span class="va">timetable_full_year</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">YDAY</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/yday2YDAY.html" class="external-link">yday2YDAY</a></span><span class="op">(</span><span class="va">yday_sample</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">HOUR</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/hour2HOUR.html" class="external-link">hour2HOUR</a></span><span class="op">(</span><span class="va">hour_sample</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">timetable_subset</span></span>
<span><span class="co">#&gt;      ANNUAL   YDAY   HOUR    slice        share weight</span></span>
<span><span class="co">#&gt;      &lt;char&gt; &lt;char&gt; &lt;char&gt;   &lt;char&gt;        &lt;num&gt;  &lt;num&gt;</span></span>
<span><span class="co">#&gt;   1: ANNUAL   d015    h00 d015_h00 0.0001141553      1</span></span>
<span><span class="co">#&gt;   2: ANNUAL   d015    h01 d015_h01 0.0001141553      1</span></span>
<span><span class="co">#&gt;   3: ANNUAL   d015    h02 d015_h02 0.0001141553      1</span></span>
<span><span class="co">#&gt;   4: ANNUAL   d015    h03 d015_h03 0.0001141553      1</span></span>
<span><span class="co">#&gt;   5: ANNUAL   d015    h04 d015_h04 0.0001141553      1</span></span>
<span><span class="co">#&gt;  ---                                                  </span></span>
<span><span class="co">#&gt; 284: ANNUAL   d349    h19 d349_h19 0.0001141553      1</span></span>
<span><span class="co">#&gt; 285: ANNUAL   d349    h20 d349_h20 0.0001141553      1</span></span>
<span><span class="co">#&gt; 286: ANNUAL   d349    h21 d349_h21 0.0001141553      1</span></span>
<span><span class="co">#&gt; 287: ANNUAL   d349    h22 d349_h22 0.0001141553      1</span></span>
<span><span class="co">#&gt; 288: ANNUAL   d349    h23 d349_h23 0.0001141553      1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">timetable_subset</span><span class="op">$</span><span class="va">HOUR</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "h00" "h01" "h02" "h03" "h04" "h05" "h06" "h07" "h08" "h09" "h10" "h11"</span></span>
<span><span class="co">#&gt; [13] "h12" "h13" "h14" "h15" "h16" "h17" "h18" "h19" "h20" "h21" "h22" "h23"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">timetable_subset</span><span class="op">$</span><span class="va">YDAY</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "d015" "d043" "d074" "d104" "d135" "d165" "d196" "d227" "d257" "d288"</span></span>
<span><span class="co">#&gt; [11] "d318" "d349"</span></span>
<span></span>
<span><span class="va">SUBSET_HOURS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">timetable_subset</span><span class="op">)</span> <span class="co"># total hours in the subset</span></span>
<span><span class="va">FRACT_YEAR</span> <span class="op">&lt;-</span> <span class="va">SUBSET_HOURS</span> <span class="op">/</span> <span class="fl">8760</span> <span class="co"># fraction in a year</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="st">"Subannual time resolution:"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Subannual time resolution:"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"   Total number of days a year:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">yday_sample</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "   Total number of days a year: 12"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"   Total number of hours per year:"</span>, <span class="va">SUBSET_HOURS</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "   Total number of hours per year: 288"</span></span>
<span></span>
<span><span class="co"># Partial calendar</span></span>
<span><span class="va">partial_calendar</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/calendar.html" class="external-link">newCalendar</a></span><span class="op">(</span></span>
<span>  timetable <span class="op">=</span> <span class="va">timetable_subset</span>, </span>
<span>  year_fraction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">timetable_subset</span><span class="op">$</span><span class="va">share</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="commodities">Commodities<a class="anchor" aria-label="anchor" href="#commodities"></a>
</h3>
<p>Commodities are the main objects of the model, representing the goods
and services that are traded in the model. Commodities can be energy
carriers (e.g. electricity, coal, oil, gas, biomass), emissions
(e.g. CO2, NOx, SOx, PM), or other goods and services. Commodities are
defined by their name, description, unit of measure, and time-frame by
the <code>newCommodity</code> function. Some of the commodity-objects
are pre-built in the <code>energy</code> module, and can be loaded from
there. Commodities specific to the electricity model are defined below.
Important features of commodities are their time-frame, and the limit
type (slot <code>@limtype</code>) that defines the balance equation for
the commodity. By default the limit type is set to “LO” (lower bound)
meaning that excess of commodity is allowed, but the deficit is not.
Other options are “UP” (upper bound) and “FX” (equality).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># energy</span></span>
<span><span class="va">ELC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Electricity"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># emissions</span></span>
<span><span class="va">CO2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CO2"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Carbon emissions"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"kt"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">NOX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NOX"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Nitrogen oxide emissions NOx"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"kt"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">SOX</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SOX"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Sulfur oxide emissions SOx"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"kt"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">PM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"PM"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Particulate matter (particle pollution)"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"kt"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">REN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"REN"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic renewable energy"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># storing all commodities in a repository</span></span>
<span><span class="va">repo_comm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"repo_comm"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Electricity &amp; emissions commodities"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">ELC</span>, <span class="va">CO2</span>, <span class="va">NOX</span>, <span class="va">SOX</span>, <span class="va">PM</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="demand-options">Demand options<a class="anchor" aria-label="anchor" href="#demand-options"></a>
</h3>
<p>For the electricity-only model, the electricity is considered as the
final product, and the final demand can be set exogenously via the
<code>demand</code> class. The <code>newDemand</code> function creates
an object of class <code>demand</code> with detailed representation of
the demanded electricity by region, time-slice, and year. The values of
demand without information on the parameter dimension, such as the
region, time-slice, or year are considered default for the non-specified
dimensions, and will be filled-in on the interpolation step of the model
along with the missing years. Therefore it is enough to set values for
the base-year and the last year, if the demand is expected to grow
linearly. The load curve by region in India for 2019 is stored in the
<code>load_2019_MWh</code> dataset, and used in this example as the
base-year demand, extrapolated through the model’s horizon.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># call the load curve by region in 2019 from IDDEA datasets</span></span>
<span><span class="va">load_BY</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ideea_data.html">get_ideea_data</a></span><span class="op">(</span><span class="st">"load_2019_MWh"</span>, nreg <span class="op">=</span> <span class="fl">7</span>, variable <span class="op">=</span> <span class="st">"MWh"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>GWh <span class="op">=</span> <span class="va">MWh</span> <span class="op">/</span> <span class="fl">1e3</span><span class="op">)</span> </span>
<span>  <span class="co"># rename(region = {{regN}})</span></span>
<span></span>
<span><span class="co"># define `demand` object with the historical load curve</span></span>
<span><span class="va">DEMELC_BY</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/demand.html" class="external-link">newDemand</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"DEMELC_BY"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Houlry electric demand by region, base-year level"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  unit <span class="op">=</span> <span class="va">ELC</span><span class="op">@</span><span class="va">unit</span>,</span>
<span>  dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">load_BY</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    <span class="co"># year = load_BY$year, # assign to all years</span></span>
<span>    slice <span class="op">=</span> <span class="va">load_BY</span><span class="op">$</span><span class="va">slice</span>, </span>
<span>    dem <span class="op">=</span> <span class="va">load_BY</span><span class="op">$</span><span class="va">GWh</span> <span class="co"># * dem_adj</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The demand growth is set by another demand-object with linear growth
of the demand in every region, time-slice from zero to 2x the base-year
level by 2050, and 3x by 2070. If the model horizon is longer, the
demand can be extrapolated further.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define demand in several years, e.g. 2020, 2050, 2070, </span></span>
<span><span class="co"># which will be interpolated before solving the model ('interpolation' step)</span></span>
<span><span class="va">load_2x_2050</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">load_BY</span>, year <span class="op">=</span> <span class="fl">2020</span>, GWh <span class="op">=</span> <span class="fl">0.0</span> <span class="op">*</span> <span class="va">GWh</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">load_BY</span>, year <span class="op">=</span> <span class="fl">2050</span>, GWh <span class="op">=</span> <span class="fl">2</span> <span class="op">*</span> <span class="va">GWh</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">load_BY</span>, year <span class="op">=</span> <span class="fl">2070</span>, GWh <span class="op">=</span> <span class="fl">3</span> <span class="op">*</span> <span class="va">GWh</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">load_BY</span></span>
<span><span class="co">#&gt;        region    slice            datetime MONTH  YDAY  HOUR   MWh    GWh</span></span>
<span><span class="co">#&gt;        &lt;char&gt;   &lt;char&gt;              &lt;POSc&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;num&gt;  &lt;num&gt;</span></span>
<span><span class="co">#&gt;     1:   EAST d001_h00 2019-01-01 00:00:00     1     1     0 10833 10.833</span></span>
<span><span class="co">#&gt;     2:   EAST d001_h01 2019-01-01 01:00:00     1     1     1 10214 10.214</span></span>
<span><span class="co">#&gt;     3:   EAST d001_h02 2019-01-01 02:00:00     1     1     2  9974  9.974</span></span>
<span><span class="co">#&gt;     4:   EAST d001_h03 2019-01-01 03:00:00     1     1     3  9808  9.808</span></span>
<span><span class="co">#&gt;     5:   EAST d001_h04 2019-01-01 04:00:00     1     1     4  9684  9.684</span></span>
<span><span class="co">#&gt;    ---                                                                   </span></span>
<span><span class="co">#&gt; 43796:   WEST d365_h19 2019-12-31 19:00:00    12   365    19 44449 44.449</span></span>
<span><span class="co">#&gt; 43797:   WEST d365_h20 2019-12-31 20:00:00    12   365    20 41124 41.124</span></span>
<span><span class="co">#&gt; 43798:   WEST d365_h21 2019-12-31 21:00:00    12   365    21 38602 38.602</span></span>
<span><span class="co">#&gt; 43799:   WEST d365_h22 2019-12-31 22:00:00    12   365    22 36833 36.833</span></span>
<span><span class="co">#&gt; 43800:   WEST d365_h23 2019-12-31 23:00:00    12   365    23 36831 36.831</span></span>
<span></span>
<span><span class="co"># define the second demand object with the load growth</span></span>
<span><span class="va">DEMELC_2X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/demand.html" class="external-link">newDemand</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"DEMELC_2X"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Additional demand growth, proportional to the current load"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  unit <span class="op">=</span> <span class="va">ELC</span><span class="op">@</span><span class="va">unit</span>,</span>
<span>  dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">load_2x_2050</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    year <span class="op">=</span> <span class="va">load_2x_2050</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">load_2x_2050</span><span class="op">$</span><span class="va">slice</span>, <span class="co"># comment to assign to all hours</span></span>
<span>    dem <span class="op">=</span> <span class="va">load_2x_2050</span><span class="op">$</span><span class="va">GWh</span> <span class="co"># * dem_adj</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Alternative demand-objects can be created and added to the model
before interpolation/solution to represent different scenarios or policy
options.<br>
Another ways to set the demand in the model also available. For example,
<code>export</code> objects define the potential external demand with
levels and also the price of the electricity. If other sectors are
modeled, they can also set the demand for electricity,
e.g. <code>transport</code> or <code>industry</code> modules.</p>
</div>
<div class="section level3">
<h3 id="supply-resources">Supply &amp; resources<a class="anchor" aria-label="anchor" href="#supply-resources"></a>
</h3>
<p>While demand objects set the final demand commodity (<code>ELC</code>
in this example), the supply objects define the sources of primary
commodities (e.g. coal, gas, oil, biomass, nuclear, renewable energy
sources) that are used in the production of the final or interim
products. The resources used in the electricity model has been already
defined in the <code>energy</code> module, and can be loaded from there.
Another way to introduce a supply of a commodity to the model is
<code>import</code> from another region or from outside the model
regions (“The Rest of the World”, ROW). For every tradable energy
commodity we defined the <code>import</code> with higher than domestic
supply price to ensure that the domestic supply is used first and extend
the availability of the commodities’ supply beyond the domestic
resources – essencial for long-term planning.</p>
<div class="section level4">
<h4 id="primary-energy">Primary energy<a class="anchor" aria-label="anchor" href="#primary-energy"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># define repository for energy supply and resources</span></span>
<span><span class="va">repo_supply</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"repo_supply"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Energy supply (markets)"</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add</span><span class="op">(</span> <span class="co"># import objects from energy module</span></span>
<span>    <span class="co"># coal</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">COA</span>, <span class="co"># coal commodity</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">SUP_COA</span>, <span class="co"># coal domestic supply</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">IMP_COA</span>, <span class="co"># coal import</span></span>
<span>    <span class="co"># natural gas</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">GAS</span>, <span class="co"># natural gas commodity</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">SUP_GAS</span>, <span class="co"># natural gas domestic supply</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">IMP_GAS</span>, <span class="co"># natural gas import</span></span>
<span>    <span class="co"># oil</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">OIL</span>, <span class="co"># oil commodity</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">SUP_OIL</span>, <span class="co"># oil domestic supply by region</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">IMP_OIL</span>, <span class="co"># oil import</span></span>
<span>    <span class="co"># biomass</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">BIO</span>, <span class="co"># biomass commodity</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">RES_BIO</span>, <span class="co"># domestic resource of biomass</span></span>
<span>     <span class="co"># nuclear</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">NUC</span>, <span class="co"># nuclear fuel commodity</span></span>
<span>    <span class="va">ideea_modules</span><span class="op">$</span><span class="va">energy</span><span class="op">$</span><span class="va">IMP_NUC</span>, <span class="co"># Nuclear fuel international market</span></span>
<span>    <span class="co">#</span></span>
<span>    <span class="va">REN</span>, <span class="co"># all type of non-fuel (renewable) energy</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>      name <span class="op">=</span> <span class="st">"RES_REN"</span>, </span>
<span>      commodity <span class="op">=</span> <span class="st">"REN"</span>, </span>
<span>      desc <span class="op">=</span> <span class="st">"An artificial commodity to represent all renewable energy resources"</span></span>
<span>      <span class="op">)</span>,</span>
<span>    overwrite <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">repo_supply</span><span class="op">)</span></span>
<span><span class="co">#&gt; commodity    import    supply </span></span>
<span><span class="co">#&gt;         6         4         5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">repo_supply</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "COA"     "SUP_COA" "IMP_COA" "GAS"     "SUP_GAS" "IMP_GAS" "OIL"    </span></span>
<span><span class="co">#&gt;  [8] "SUP_OIL" "IMP_OIL" "BIO"     "RES_BIO" "NUC"     "IMP_NUC" "REN"    </span></span>
<span><span class="co">#&gt; [15] "RES_REN"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="carbon-storage">Carbon storage<a class="anchor" aria-label="anchor" href="#carbon-storage"></a>
</h4>
<p>The geological potential for carbon storage by region is defined in
<code>CCUS</code> document, stored in IDEEA modules.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># from ideea_modules</span></span>
<span><span class="va">repo_geoccs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"repo_ccs"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Carbon storage geo-potential"</span>,</span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">CO2SINK</span>, <span class="co"># commodity to represent stored CO2</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">RES_CO2SINK</span> <span class="co"># domestic resource of CO2 storage</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">repo_geoccs</span><span class="op">)</span></span>
<span><span class="co">#&gt; commodity    supply </span></span>
<span><span class="co">#&gt;         1         1</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="capacity-factors">Capacity factors<a class="anchor" aria-label="anchor" href="#capacity-factors"></a>
</h3>
<p>The availability of renewable energy sources (solar, wind, hydro) is
defined by the capacity factors (CF) that represent the share of the
potential energy that can be harvested in a given time-frame per unit of
a generator capacity. The capacity factors are defined by the
<code>weather</code> objects with the time-frame of the weather data
(e.g. “HOUR” for hourly data, “YDAY” for daily data). The weather data
can be obtained from the external sources (e.g. NREL, MERRA2, ERA5),
some are saved in the IDEEA datasets. The capacity factors can be
defined for the whole region, or for the specific locations.</p>
<div class="section level4">
<h4 id="solar">Solar<a class="anchor" aria-label="anchor" href="#solar"></a>
</h4>
<p>This example implements the solar capacity factors for the regions of
India, based on the MERRA2 dataset. The capacity factors are defined for
the tilted tracking system (<code>tl</code>), estimated with
<code>merra2ools</code> package.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">merra_solar</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">merra_solar_cf_reg7</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">reg7_off</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">gis_sf</span><span class="op">$</span><span class="va">region</span><span class="op">)</span></span>
<span></span>
<span><span class="va">WSOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newWeather.html" class="external-link">newWeather</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"WSOL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Solar capacity factors, tilted tracking system (tl)"</span>,</span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">merra_solar</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">merra_solar</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">merra_solar</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    <span class="co"># year = NA # all years</span></span>
<span>    wval <span class="op">=</span> <span class="va">merra_solar</span><span class="op">$</span><span class="va">scf_tl</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="wind">Wind<a class="anchor" aria-label="anchor" href="#wind"></a>
</h4>
<p>The wind capacity factors are defined for the regions of India, based
on the MERRA2 dataset. The capacity factors are estimated for the 100m
height (<code>wcf100m</code>) with <code>merra2ools</code> package, the
data for 7 regions is saved in <code>ideea_data</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">merra_wind</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">merra_wind_cf_reg7</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">reg7_off</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">region</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">gis_sf</span><span class="op">$</span><span class="va">region</span><span class="op">)</span></span>
<span></span>
<span><span class="va">WWIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newWeather.html" class="external-link">newWeather</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"WWIN"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Onshore wind 100m height"</span>,</span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">merra_wind</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">merra_wind</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">merra_wind</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    <span class="co"># year = NA # same for all years</span></span>
<span>    wval <span class="op">=</span> <span class="va">merra_wind</span><span class="op">$</span><span class="va">wcf100m</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="hydro">Hydro<a class="anchor" aria-label="anchor" href="#hydro"></a>
</h4>
<p>The hydro capacity factors are based on the official hourly data for
India in 2013. This simplification is used to demonstrate the model’s
capabilities and can be replaced with more detailed data if
available.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">WHYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newWeather.html" class="external-link">newWeather</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"WHYD"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Hydro CUF"</span>,</span>
<span>  <span class="co"># region = c(unique(merra_wind$region),"NORTHEAST"),</span></span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># region = NA, # same for all regions</span></span>
<span>    slice <span class="op">=</span> <span class="fu">timeslices</span><span class="fu">::</span><span class="fu">dtm2tsl</span><span class="op">(</span><span class="va">ideea_data</span><span class="op">$</span><span class="va">hydro_hourly_cf_2013</span><span class="op">$</span><span class="va">datetime</span><span class="op">)</span>,</span>
<span>    <span class="co"># year = NA # same for all years</span></span>
<span>    wval <span class="op">=</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">hydro_hourly_cf_2013</span><span class="op">$</span><span class="va">cf</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="generating-technologies">Generating technologies<a class="anchor" aria-label="anchor" href="#generating-technologies"></a>
</h3>
<p>The pre-existing capacity of power generation can be defined as
groups of technologies, aggregated by the primary fuel type and other
technological features, such as the efficiency, the costs, the lifetime,
emissions, etc. In this example we use open-source datasets from WRI
with some up-to-date corrections to represent the existing capacity of
the power plants in India by the model regions and primary fuels. While
the capacity is taken from the open WRI dataset, the technology
parameters are collected by the IDEEA group, and have been used to
define technology objects in the <code>techs</code> module
(<code>ideea_modules$techs</code>).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap_0</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ideea_data.html">get_ideea_data</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"generators_wri"</span>, </span>
<span>  <span class="co"># sets = ,</span></span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"primary_fuel"</span>, <span class="st">"capacity_mw"</span><span class="op">)</span>,</span>
<span>  nreg <span class="op">=</span> <span class="va">nreg</span>, offshore <span class="op">=</span> <span class="cn">F</span>, islands <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">capacity_mw</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">cap_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ideea_data.html">get_ideea_data</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"generators_2020"</span>, </span>
<span>  <span class="co"># nreg = 36, </span></span>
<span>  nreg <span class="op">=</span> <span class="va">nreg</span>, </span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Solar"</span>, <span class="st">"Wind"</span>, <span class="st">"Biomass"</span>, <span class="st">"Small Hydro"</span><span class="op">)</span>, </span>
<span>  <span class="co"># offshore = T, # not working properly - bug</span></span>
<span>  islands <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cap_0</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Solar|Wind|Biomass"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    <span class="va">cap_1</span>, </span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/all_of.html" class="external-link">any_of</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Solar"</span>, <span class="st">"Wind"</span>, <span class="st">"Biomass"</span>, <span class="st">"Small Hydro"</span><span class="op">)</span><span class="op">)</span>, </span>
<span>    names_to <span class="op">=</span> <span class="st">"primary_fuel"</span>, </span>
<span>    values_to <span class="op">=</span> <span class="st">"capacity_mw"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>offshore <span class="op">=</span> <span class="cn">FALSE</span>, .after <span class="op">=</span> <span class="st">"capacity_mw"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cap_sf</span> <span class="op">&lt;-</span> <span class="va">gis_sf</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">right_join</a></span><span class="op">(</span><span class="va">cap</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">primary_fuel</span><span class="op">)</span>, <span class="va">capacity_mw</span> <span class="op">&gt;</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; Joining with `by = join_by(region, offshore)`</span></span>
<span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gis_sf</span>, fill <span class="op">=</span> <span class="st">"grey"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">cap_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span>option <span class="op">=</span> <span class="st">"H"</span>, name <span class="op">=</span> <span class="st">"GW"</span>, trans <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">primary_fuel</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span>    <span class="co"># panel.background = element_rect(fill = "aliceblue"),</span></span>
<span>    <span class="co"># panel.grid = element_line(color = "white", size = 0.8),</span></span>
<span>    axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co"># a</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsave.html" class="external-link">ggsave</a></span><span class="op">(</span><span class="st">"tmp/installed_capacity.png"</span>, <span class="va">a</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">6</span>, height <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  scale <span class="op">=</span> <span class="fl">1.25</span></span>
<span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap</span><span class="op">$</span><span class="va">primary_fuel</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hydro"       "Coal"        "Gas"         "Nuclear"     "Oil"        </span></span>
<span><span class="co">#&gt; [6] "Solar"       "Wind"        "Biomass"     "Small Hydro"</span></span></code></pre></div>
<div class="section level4">
<h4 id="coal-fired">Coal-fired<a class="anchor" aria-label="anchor" href="#coal-fired"></a>
</h4>
<p>There are several generations of coal-fired power plants, from
sub-critical to supercritical, and ultra-supercritical, with different
efficiencies, costs, and emissions. The existing capacity (stock) of
coal-fired power plants in this example is assumed to be represented by
the <code>ECOASUP</code> technology with average efficiency, which will
linearly retire by 2040. More advanced technologies
(<code>ECOAULT</code>) by vintages (2020, 2030, 2040, 2050) are
available for investment. The technology with carbon capture is defined
the the <em>CCS</em> section below.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Existing capacity</span></span>
<span><span class="va">cap_coa</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Coal"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">offshore</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_coa_2030</span> <span class="op">&lt;-</span> <span class="va">cap_coa</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2030</span>, capacity_mw <span class="op">=</span> <span class="fl">0.8</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_coa_2040</span> <span class="op">&lt;-</span> <span class="va">cap_coa</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2040</span>, capacity_mw <span class="op">=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_coa</span> <span class="op">&lt;-</span> <span class="va">cap_coa</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_coa_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_coa_2040</span><span class="op">)</span></span>
<span><span class="co"># Note: the existing capacity will be linearly interpolated from 2020 to 2040</span></span>
<span><span class="co"># cap = 0 after 2040</span></span>
<span></span>
<span><span class="co"># load coal technology (assume Super-critical for all existing capacity)</span></span>
<span><span class="va">ECOASUP_2020</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ECOASUP</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ECOASUP_2020</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ECOASUP_2020</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "technology"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "energyRt"</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">ECOASUP_2020</span> <span class="op">&lt;-</span> <span class="va">ECOASUP_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span>capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">cap_coa</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    year <span class="op">=</span> <span class="va">cap_coa</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    stock <span class="op">=</span> <span class="va">cap_coa</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load most advanced coal techs for new investment</span></span>
<span><span class="va">ECOA</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ECOAULT</span> <span class="op">|&gt;</span> <span class="co"># ultra-super-critical</span></span>
<span>  <span class="co"># add(ideea_modules$techs$ECOASUP$ECOASUP_2030) |&gt;</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">ECOASUP_2020</span><span class="op">)</span> <span class="co"># add tech with existing capacity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ECOA</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ECOAULT_2020" "ECOAULT_2030" "ECOAULT_2040" "ECOAULT_2050" "ECOASUP_2020"</span></span>
<span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">ECOA</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ECOASUP_2020</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">draw</span><span class="op">(</span><span class="va">ECOA</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ECOAULT_2050</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-16-2.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="natural-gas">Natural gas<a class="anchor" aria-label="anchor" href="#natural-gas"></a>
</h4>
<p>There are two key natural gas fired technologies in the model: the
combined cycle gas turbine (CCGT) and the open cycle gas turbine (OCGT).
The existing capacity of gas-fired power plants in this example is
assumed to be represented by the CCGT (<code>ENGCC</code>) technology,
which will linearly retire by 2040. The OCGT technology
(<code>ENGOC</code>) and more advanced vintages of NGCC are available
for investment. The technology with carbon capture is defined the the
<em>CCS</em> section below.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap_gas</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Gas"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">offshore</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_gas_2030</span> <span class="op">&lt;-</span> <span class="va">cap_gas</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2030</span>, capacity_mw <span class="op">=</span> <span class="fl">0.8</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_gas_2040</span> <span class="op">&lt;-</span> <span class="va">cap_gas</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2040</span>, capacity_mw <span class="op">=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_gas</span> <span class="op">&lt;-</span> <span class="va">cap_gas</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_gas_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_gas_2040</span><span class="op">)</span></span>
<span><span class="co"># Note: the existing capacity will be linearly interpolated from 2020 to 2040</span></span>
<span><span class="co"># cap = 0 after 2040</span></span>
<span></span>
<span><span class="co"># load coal technology (assume Super-critical for all existing capacity)</span></span>
<span><span class="va">ENGCC_2020</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ENGCC</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ENGCC_2020</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">ENGCC_2020</span> <span class="op">&lt;-</span> <span class="va">ENGCC_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span>capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">cap_gas</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    year <span class="op">=</span> <span class="va">cap_gas</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    stock <span class="op">=</span> <span class="va">cap_gas</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load most advanced coal techs for new investment</span></span>
<span><span class="va">EGAS</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ENGCC</span> <span class="op">|&gt;</span> <span class="co"># Combined cycle gas turbine</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">ENGCC_2020</span>, overwrite <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># technology with pre-existing capacity</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ENGOC</span><span class="op">)</span> <span class="co"># open cycle gas turbine</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EGAS</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ENGCC_2020" "ENGCC_2030" "ENGCC_2040" "ENGCC_2050" "ENGOC_2020"</span></span>
<span><span class="co">#&gt; [6] "ENGOC_2030" "ENGOC_2040" "ENGOC_2050"</span></span>
<span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EGAS</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ENGCC_2020</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/cap_gas-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># draw(EGAS@data$ENGCC_2050)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="solar-1">Solar<a class="anchor" aria-label="anchor" href="#solar-1"></a>
</h4>
<p>The solar technologies are defined for the base-year of the model
with pre-existing capacity from WRI datasets; the new technologies
available for investment are represented by several vintages of solar PV
technologies up to 2050.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># solar capacity in ~2020</span></span>
<span><span class="va">cap_sol</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Solar"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_sol_2030</span> <span class="op">&lt;-</span> <span class="va">cap_sol</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2030</span>, capacity_mw <span class="op">=</span> <span class="fl">0.8</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume further retirement by 2040</span></span>
<span><span class="va">cap_sol_2040</span> <span class="op">&lt;-</span> <span class="va">cap_sol</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2040</span>, capacity_mw <span class="op">=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_sol</span> <span class="op">&lt;-</span> <span class="va">cap_sol</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_sol_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_sol_2040</span><span class="op">)</span></span>
<span><span class="co"># Note: the existing capacity will be linearly interpolated from 2020 to 2040</span></span>
<span><span class="co"># cap = 0 after 2040</span></span>
<span></span>
<span><span class="co"># load repository with solar technologies</span></span>
<span><span class="va">ESOL</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ESOL</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">)</span> <span class="co"># repository with solar techs</span></span>
<span><span class="co">#&gt; [1] "repository"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "energyRt"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ESOL_2020" "ESOL_2030" "ESOL_2040" "ESOL_2050"</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ESOL_2020</span> <span class="op">&lt;-</span> <span class="va">ESOL</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ESOL_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span>capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">cap_sol</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    year <span class="op">=</span> <span class="va">cap_sol</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    stock <span class="op">=</span> <span class="va">cap_sol</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add weather factor name and parameter for each technology</span></span>
<span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tech</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span></span>
<span>    <span class="va">tech</span>,</span>
<span>    weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>weather <span class="op">=</span> <span class="st">"WSOL"</span>, waf.fx <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>comm <span class="op">=</span> <span class="st">"REN"</span>, combustion <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ESOL_2020" "ESOL_2030" "ESOL_2040" "ESOL_2050"</span></span>
<span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ESOL_2020</span><span class="op">@</span><span class="va">weather</span></span>
<span><span class="co">#&gt;   weather comm wafc.lo wafc.up wafc.fx waf.lo waf.up waf.fx wafs.lo wafs.up</span></span>
<span><span class="co">#&gt; 1    WSOL &lt;NA&gt;      NA      NA      NA     NA     NA      1      NA      NA</span></span>
<span><span class="co">#&gt;   wafs.fx</span></span>
<span><span class="co">#&gt; 1      NA</span></span>
<span></span>
<span><span class="va">ESOL</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ESOL_2020</span> <span class="op">|&gt;</span> <span class="fu">draw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-17-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="wind-1">Wind<a class="anchor" aria-label="anchor" href="#wind-1"></a>
</h4>
<p>Similarly, the wind technologies are defined for the base-year of the
model with pre-existing capacity from WRI datasets; the new technologies
available for investment are represented by vintages.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># existing capacity</span></span>
<span><span class="va">cap_win</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Wind"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># correcting the 2020 base year capacity values for wind.</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_win_2030</span> <span class="op">&lt;-</span> <span class="va">cap_win</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2030</span>, capacity_mw <span class="op">=</span> <span class="fl">0.8</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume further retirement by 2040</span></span>
<span><span class="va">cap_win_2040</span> <span class="op">&lt;-</span> <span class="va">cap_win</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2040</span>, capacity_mw <span class="op">=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_win</span> <span class="op">&lt;-</span> <span class="va">cap_win</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_win_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_win_2040</span><span class="op">)</span></span>
<span><span class="co"># Note: the existing capacity will be linearly interpolated from 2020 to 2040</span></span>
<span><span class="co"># cap = 0 after 2040</span></span>
<span></span>
<span><span class="co"># load repository with wind technologies</span></span>
<span><span class="va">EWIN</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">EWIN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">EWIN</span><span class="op">)</span> <span class="co"># repository with wind techs</span></span>
<span><span class="co">#&gt; [1] "repository"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "energyRt"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "EWIN_2020" "EWIN_2030" "EWIN_2040" "EWIN_2050"</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EWIN_2020</span> <span class="op">&lt;-</span> <span class="va">EWIN</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EWIN_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span>capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">cap_win</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    year <span class="op">=</span> <span class="va">cap_win</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    stock <span class="op">=</span> <span class="va">cap_win</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># add weather factor name and parameter for each technology</span></span>
<span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tech</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span></span>
<span>    <span class="va">tech</span>,</span>
<span>    weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>weather <span class="op">=</span> <span class="st">"WWIN"</span>, waf.fx <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>comm <span class="op">=</span> <span class="st">"REN"</span>, combustion <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "EWIN_2020" "EWIN_2030" "EWIN_2040" "EWIN_2050"</span></span>
<span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EWIN_2020</span><span class="op">@</span><span class="va">weather</span></span>
<span><span class="co">#&gt;   weather comm wafc.lo wafc.up wafc.fx waf.lo waf.up waf.fx wafs.lo wafs.up</span></span>
<span><span class="co">#&gt; 1    WWIN &lt;NA&gt;      NA      NA      NA     NA     NA      1      NA      NA</span></span>
<span><span class="co">#&gt;   wafs.fx</span></span>
<span><span class="co">#&gt; 1      NA</span></span>
<span></span>
<span><span class="va">EWIN</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EWIN_2020</span> <span class="op">|&gt;</span> <span class="fu">draw</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-18-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="hydro-1">Hydro<a class="anchor" aria-label="anchor" href="#hydro-1"></a>
</h4>
<p>The decision on development of hydro-power plants normally goes
beyond the optimization of costs, and takes into account the
environmental and social impacts, as well as the availability of the
water resources. The development of hydro-power may take a decade, and
the operational lifetime can go beyond a century. Here we assume that
the existing capacity of hydro-power plants do not retire (until 2100),
the new investments are not available, such projects can be added to the
model as a separate scenario.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap_hyd</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Hydro"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>primary_fuel <span class="op">=</span> <span class="st">"Hydro"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># combining Small with other - assumption (!)</span></span>
<span>  <span class="co"># filter(!offshore) |&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span>, <span class="va">primary_fuel</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>capacity_mw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">capacity_mw</span>, na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">capacity_mw</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_hyd_2030</span> <span class="op">&lt;-</span> <span class="va">cap_hyd</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2030</span>, capacity_mw <span class="op">=</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_hyd_2100</span> <span class="op">&lt;-</span> <span class="va">cap_hyd</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2100</span>, capacity_mw <span class="op">=</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_hyd</span> <span class="op">&lt;-</span> <span class="va">cap_hyd</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_hyd_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_hyd_2100</span><span class="op">)</span></span>
<span><span class="co"># Note: the existing capacity will be linearly interpolated from 2020 to 2040</span></span>
<span><span class="co"># cap = 0 after 2040</span></span>
<span></span>
<span><span class="co"># load base-year technology</span></span>
<span><span class="va">EHYD_2020</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EHYD_2020</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">EHYD_2020</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "technology"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "energyRt"</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">EHYD_2020</span> <span class="op">&lt;-</span> <span class="va">EHYD_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span></span>
<span>    capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      region <span class="op">=</span> <span class="va">cap_hyd</span><span class="op">$</span><span class="va">region</span>,</span>
<span>      year <span class="op">=</span> <span class="va">cap_hyd</span><span class="op">$</span><span class="va">year</span>,</span>
<span>      stock <span class="op">=</span> <span class="va">cap_hyd</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>    <span class="op">)</span>,</span>
<span>    end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span> <span class="co"># not available for investment</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">EHYD</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">EHYD</span> <span class="op">|&gt;</span> <span class="co">#</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">EHYD_2020</span>, overwrite <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="co"># add tech with existing capacity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "EHYD_2020" "EHYD_2030" "EHYD_2040" "EHYD_2050"</span></span>
<span></span>
<span><span class="co">#add weather factor name and parameter for each technology</span></span>
<span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">tech</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span></span>
<span>    <span class="va">tech</span>,</span>
<span>    weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>weather <span class="op">=</span> <span class="st">"WHYD"</span>, waf.fx <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>comm <span class="op">=</span> <span class="st">"REN"</span>, combustion <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "EHYD_2020" "EHYD_2030" "EHYD_2040" "EHYD_2050"</span></span>
<span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EHYD_2020</span><span class="op">@</span><span class="va">weather</span></span>
<span><span class="co">#&gt;   weather comm wafc.lo wafc.up wafc.fx waf.lo waf.up waf.fx wafs.lo wafs.up</span></span>
<span><span class="co">#&gt; 1    WHYD &lt;NA&gt;      NA      NA      NA     NA     NA      1      NA      NA</span></span>
<span><span class="co">#&gt;   wafs.fx</span></span>
<span><span class="co">#&gt; 1      NA</span></span>
<span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EHYD</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EHYD_2020</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="nuclear">Nuclear<a class="anchor" aria-label="anchor" href="#nuclear"></a>
</h4>
<p>Nuclear power plants are also quite controversial, and the decision
on their development is based on the long-term energy policy, the
availability of the uranium resources, the safety and environmental
concerns, and the public acceptance. Here we assume that the existing
capacity of nuclear power plants do not retire (until 2050) with further
linear fading out by 2080. The new investments are limited by a separate
constraint (see <em>Policies</em> section), which can be dropped or
relaxed in a particulate scenarios if decided.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap_nuc</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Nuclear"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">offshore</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume no retirement up to 2050</span></span>
<span><span class="va">cap_nuc_2050</span> <span class="op">&lt;-</span> <span class="va">cap_nuc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2050</span>, capacity_mw <span class="op">=</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># linear retirement from 2050 capacity by 2080</span></span>
<span><span class="va">cap_nuc_LAST</span> <span class="op">&lt;-</span> <span class="va">cap_nuc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2080</span>, capacity_mw <span class="op">=</span> <span class="fl">1e-20</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_nuc</span> <span class="op">&lt;-</span> <span class="va">cap_nuc</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_nuc_2050</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_nuc_LAST</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load base-year technology</span></span>
<span><span class="va">ENUC_2020</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ENUC</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ENUC_2020</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ENUC_2020</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "technology"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "energyRt"</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">ENUC_2020</span> <span class="op">&lt;-</span> <span class="va">ENUC_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span></span>
<span>    capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      region <span class="op">=</span> <span class="va">cap_nuc</span><span class="op">$</span><span class="va">region</span>,</span>
<span>      year <span class="op">=</span> <span class="va">cap_nuc</span><span class="op">$</span><span class="va">year</span>,</span>
<span>      stock <span class="op">=</span> <span class="va">cap_nuc</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>    <span class="op">)</span>,</span>
<span>    end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span> <span class="co"># not available for investment</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">ENUC</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">ENUC</span> <span class="op">|&gt;</span> <span class="co"># all nuclear techs</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">ENUC_2020</span>, overwrite <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="co"># replace with the existing capacity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ENUC</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "ENUC_2020" "ENUC_2030" "ENUC_2040" "ENUC_2050"</span></span>
<span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">ENUC</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">ENUC_2020</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-20-1.png" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="ccs">CCS<a class="anchor" aria-label="anchor" href="#ccs"></a>
</h4>
<p>Coal- and gas-fired power plants with carbon capture and storage
(CCS) technologies has been defined in “ccus” article and stored in the
<code>ideea_modules$CCUS</code> repository. There are two types of CCS
technologies: with fixed and flexible capture rates. The fixed capture
rate is assumed to be used any time the technology produces electricity,
while the flexible capture rate can be adjusted depending on the policy
and carbon market conditions. Here we add the flexible CCS
technologies.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># add coal and gas CCS techs from `ideea_modules$CCUS`</span></span>
<span><span class="va">repo_ccstechs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CCS Technologies"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Repository for CCS technologies"</span>,</span>
<span>  <span class="co"># # Fixed CCS capture rate</span></span>
<span>  <span class="co"># ideea_modules$CCUS$ECOA_CCS_FX, # coal plant with fixed capture rate</span></span>
<span>  <span class="co"># ideea_modules$CCUS$EGAS_CCS_FX # gas plant with fixed capture rate</span></span>
<span>  <span class="co"># Flexible CCS capture rate</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">COA0</span>, <span class="co"># alias for COA commodity to be associated with CCS</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">ALIAS_COA</span>, <span class="co"># a technology to equalize COA and COA0</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">ECOA_CCS_FL</span>, <span class="co"># coal plant with flexible capture rate</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">GAS0</span>, <span class="co"># alias for GAS commodity to be associated with CCS</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">ALIAS_GAS</span>, <span class="co"># gas plant with flexible capture rate</span></span>
<span>  <span class="va">ideea_modules</span><span class="op">$</span><span class="va">CCUS</span><span class="op">$</span><span class="va">EGAS_CCS_FL</span> <span class="co"># a technology to equalize GAS and GAS0</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="bio-energy">Bio energy<a class="anchor" aria-label="anchor" href="#bio-energy"></a>
</h4>
<p>The biomass-fired power plants are represented by the
<code>EBIO</code> technology with the existing capacity from the WRI
dataset. The new investments are available for the biomass technologies
with different vintages up to 2050. We don’t consider CCS for biomass
technologies in this example, but it can be added if needed.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cap_bio</span> <span class="op">&lt;-</span> <span class="va">cap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Biomass"</span>, <span class="va">primary_fuel</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="va">offshore</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_bio_2030</span> <span class="op">&lt;-</span> <span class="va">cap_bio</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2030</span>, capacity_mw <span class="op">=</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># assume retirement of 2020 capacity by 2030</span></span>
<span><span class="va">cap_bio_2060</span> <span class="op">&lt;-</span> <span class="va">cap_bio</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2060</span>, capacity_mw <span class="op">=</span> <span class="fl">1</span> <span class="op">*</span> <span class="va">capacity_mw</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># combine</span></span>
<span><span class="va">cap_bio</span> <span class="op">&lt;-</span> <span class="va">cap_bio</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_bio_2030</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">cap_bio_2060</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load base-year technology</span></span>
<span><span class="va">EBIO_2020</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">EBIO</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EBIO_2020</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">EBIO_2020</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "technology"</span></span>
<span><span class="co">#&gt; attr(,"package")</span></span>
<span><span class="co">#&gt; [1] "energyRt"</span></span>
<span></span>
<span><span class="co"># update base-year technology with preexisting capacity</span></span>
<span><span class="va">EBIO_2020</span> <span class="op">&lt;-</span> <span class="va">EBIO_2020</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span>capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="va">cap_bio</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    year <span class="op">=</span> <span class="va">cap_bio</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    stock <span class="op">=</span> <span class="va">cap_bio</span><span class="op">$</span><span class="va">capacity_mw</span> <span class="op">/</span> <span class="fl">1e3</span> <span class="co"># in GW</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">EBIO</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">EBIO</span> <span class="op">|&gt;</span> <span class="co">#</span></span>
<span>  <span class="fu">add</span><span class="op">(</span><span class="va">EBIO_2020</span>, overwrite <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="co"># add tech with existing capacity</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EBIO</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "EBIO_2020" "EBIO_2030" "EBIO_2040" "EBIO_2050"</span></span>
<span></span>
<span><span class="fu">draw</span><span class="op">(</span><span class="va">EBIO</span><span class="op">@</span><span class="va">data</span><span class="op">$</span><span class="va">EBIO_2020</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-22-1.png" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="energy-storage">Energy storage<a class="anchor" aria-label="anchor" href="#energy-storage"></a>
</h3>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ideea_modules$techs</span></span>
<span><span class="va">STG_BTR</span> <span class="op">&lt;-</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">techs</span><span class="op">$</span><span class="va">STG_BTR</span></span>
<span><span class="va">STG_BTR</span><span class="op">$</span><span class="va">STG_BTR_2020</span><span class="op">@</span><span class="va">fullYear</span> <span class="co"># storage cycle over year or withing YDAY</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># clreate daily storage</span></span>
<span><span class="va">STG_BTR_daily</span> <span class="op">&lt;-</span> <span class="va">STG_BTR</span></span>
<span><span class="va">STG_BTR_daily</span><span class="op">@</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">STG_BTR_daily</span><span class="op">@</span><span class="va">data</span>, <span class="kw">function</span><span class="op">(</span><span class="va">ob</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/methods/slot.html" class="external-link">.hasSlot</a></span><span class="op">(</span><span class="va">ob</span>, <span class="st">"fullYear"</span><span class="op">)</span><span class="op">)</span> <span class="va">ob</span><span class="op">@</span><span class="va">fullYear</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span>
<span>  <span class="va">ob</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span><span class="va">STG_BTR_daily</span><span class="op">$</span><span class="va">STG_BTR_2020</span><span class="op">@</span><span class="va">fullYear</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="transmission">Transmission<a class="anchor" aria-label="anchor" href="#transmission"></a>
</h3>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transmission_existing</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">transmission_5x5</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scenario</span> <span class="op">==</span> <span class="st">"current"</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">MW</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>dst <span class="op">=</span> <span class="va">destination</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">MW</span><span class="op">)</span><span class="op">)</span> <span class="co"># temporary solution</span></span>
<span></span>
<span><span class="va">gis_mainland_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">gis_sf</span>, <span class="va">offshore</span> <span class="op">==</span> <span class="cn">F</span>, <span class="va">mainland</span> <span class="op">==</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">points_coord</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">st_centroid</a></span><span class="op">(</span><span class="va">gis_mainland_sf</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_coordinates.html" class="external-link">st_coordinates</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>region <span class="op">=</span> <span class="va">gis_mainland_sf</span><span class="op">$</span><span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>lon <span class="op">=</span> <span class="va">X</span>, lat <span class="op">=</span> <span class="va">Y</span><span class="op">)</span></span>
<span></span>
<span><span class="va">a</span> <span class="op">&lt;-</span> <span class="va">transmission_existing</span> <span class="op">|&gt;</span></span>
<span>  <span class="co"># filter(scenario == "current") |&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">points_coord</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"region"</span> <span class="op">=</span> <span class="st">"region"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">points_coord</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dst"</span> <span class="op">=</span> <span class="st">"region"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>GW <span class="op">=</span> <span class="va">MW</span> <span class="op">/</span> <span class="fl">1000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">gis_sf</span>, fill <span class="op">=</span> <span class="st">"wheat"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">lon.x</span>, y <span class="op">=</span> <span class="va">lat.x</span>, xend <span class="op">=</span> <span class="va">lon.y</span>, yend <span class="op">=</span> <span class="va">lat.y</span>,</span>
<span>      linewidth <span class="op">=</span> <span class="va">GW</span></span>
<span>    <span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"dodgerblue"</span>, lineend <span class="op">=</span> <span class="st">"round"</span>,</span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">scenario</span> <span class="op">==</span> <span class="st">"current"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_segment.html" class="external-link">geom_segment</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">lon.x</span>, y <span class="op">=</span> <span class="va">lat.x</span>, xend <span class="op">=</span> <span class="va">lon.y</span>, yend <span class="op">=</span> <span class="va">lat.y</span><span class="op">)</span>,</span>
<span>    color <span class="op">=</span> <span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html" class="external-link">alpha</a></span><span class="op">(</span><span class="st">"white"</span>, <span class="fl">.5</span><span class="op">)</span>, lineend <span class="op">=</span> <span class="st">"round"</span>,</span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">scenario</span> <span class="op">==</span> <span class="st">"new"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">points_coord</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="electricity_files/figure-html/unnamed-chunk-24-1.png" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">network</span> <span class="op">&lt;-</span> <span class="va">transmission_existing</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">scenario</span> <span class="op">==</span> <span class="st">"current"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    trd_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"TRD"</span>, <span class="va">region</span>, <span class="va">dst</span>, sep <span class="op">=</span> <span class="st">"_"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>    region.x <span class="op">=</span> <span class="va">region</span>,</span>
<span>    region.y <span class="op">=</span> <span class="va">dst</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">repo_transmission</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span><span class="st">"transmission"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">network</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">network</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">trd</span> <span class="op">&lt;-</span> <span class="fu">newTrade</span><span class="op">(</span></span>
<span>      name <span class="op">=</span> <span class="va">network</span><span class="op">$</span><span class="va">trd_name</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>      <span class="co"># desc = network$lines_type[i],</span></span>
<span>      commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>      routes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">region.x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">network</span><span class="op">$</span><span class="va">region.y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        dst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">region.y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">network</span><span class="op">$</span><span class="va">region.x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      trade <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        src <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">region.x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">network</span><span class="op">$</span><span class="va">region.y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        dst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">region.y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">network</span><span class="op">$</span><span class="va">region.x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        teff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="fl">.1</span>, <span class="fl">2</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      capacityVariable <span class="op">=</span> <span class="cn">T</span>,</span>
<span>      invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">region.x</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="va">network</span><span class="op">$</span><span class="va">region.y</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>        invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span> <span class="co"># olife == 2</span></span>
<span>      <span class="op">)</span>,</span>
<span>      olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>olife <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>, <span class="co"># doubled annualized invcost for consistency</span></span>
<span>      start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>start <span class="op">=</span> <span class="va">base_year</span> <span class="op">-</span> <span class="fl">10</span><span class="op">)</span>,      </span>
<span>      capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">2030</span>, <span class="fl">2050</span>, <span class="fl">2070</span><span class="op">)</span>,</span>
<span>        stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">network</span><span class="op">$</span><span class="va">MW</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">/</span><span class="fl">1000</span>, <span class="va">network</span><span class="op">$</span><span class="va">MW</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">/</span><span class="fl">1000</span>, </span>
<span>                  <span class="va">network</span><span class="op">$</span><span class="va">MW</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">/</span><span class="fl">1000</span>, <span class="va">network</span><span class="op">$</span><span class="va">MW</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">/</span><span class="fl">1000</span><span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      cap2act <span class="op">=</span> <span class="fl">24</span> <span class="op">*</span> <span class="fl">365</span></span>
<span>    <span class="op">)</span></span>
<span>    <span class="va">repo_transmission</span> <span class="op">&lt;-</span> <span class="fu">add</span><span class="op">(</span><span class="va">repo_transmission</span>, <span class="va">trd</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/rm.html" class="external-link">rm</a></span><span class="op">(</span><span class="va">trd</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">repo_transmission</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "TRD_NORTH_WEST"      "TRD_NORTH_EAST"      "TRD_NORTH_NORTHEAST"</span></span>
<span><span class="co">#&gt; [4] "TRD_WEST_SOUTH"      "TRD_WEST_EAST"       "TRD_SOUTH_EAST"     </span></span>
<span><span class="co">#&gt; [7] "TRD_EAST_NORTHEAST"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="unserved-load">Unserved load<a class="anchor" aria-label="anchor" href="#unserved-load"></a>
</h3>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">UNSERVED</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newImport.html" class="external-link">newImport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"UNSERVED"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Unserved load, ~ 10 cr.INR/GWh, equal 100 INR/kWh"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>  imp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>price <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="policies">Policies<a class="anchor" aria-label="anchor" href="#policies"></a>
</h3>
<p>carbon emissions, climate, air quality, SOx, NOx, PM, etc.<br>
* national<br>
* state, local<br>
any other regulations of electric power sector</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CO2_CAP</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CO2_CAP"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2025</span>, <span class="fl">2075</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">900000</span>, <span class="fl">1e-10</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2025</span><span class="op">:</span><span class="fl">2100</span><span class="op">)</span>, <span class="co"># Cap total emission</span></span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vBalance"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      comm <span class="op">=</span> <span class="st">"CO2"</span>,</span>
<span>      slice <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter.forth"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">CO2_CAP</span><span class="op">@</span><span class="va">rhs</span></span>
<span><span class="co">#&gt;   year   rhs</span></span>
<span><span class="co">#&gt; 1 2025 9e+05</span></span>
<span><span class="co">#&gt; 2 2075 1e-10</span></span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NO_NEW_HYDRO</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NO_NEW_HYDRO"</span>,</span>
<span>  <span class="co"># desc = "Constraint on new Hydro plants construction",</span></span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EHYD_2030"</span>, <span class="st">"EHYD_2040"</span>, <span class="st">"EHYD_2050"</span>, <span class="st">"EHYD_2020"</span><span class="op">)</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">2060</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1e-20</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter.forth"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">NO_NEW_NUCLEAR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NO_NEW_NUCLEAR"</span>,</span>
<span>  <span class="co"># desc = "Constraint on new Hydro plants construction",</span></span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ENUC_2030"</span>, <span class="st">"ENUC_2040"</span>, <span class="st">"ENUC_2050"</span>, <span class="st">"ENUC_2020"</span><span class="op">)</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-20</span></span>
<span>    <span class="co"># rhs = c(1e-7) #eps</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter.forth"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># dput(names(ESOL))</span></span>
<span><span class="va">NO_NEW_SOLAR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NO_NEW_SOLAR"</span>,</span>
<span>  <span class="co"># desc = "Constraint on new Hydro plants construction",</span></span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">)</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-20</span></span>
<span>    <span class="co"># rhs = c(1e-7) #eps</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter.forth"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">NO_NEW_WIND</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NO_NEW_WIND"</span>,</span>
<span>  <span class="co"># desc = "Constraint on new Hydro plants construction",</span></span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EWIN</span><span class="op">)</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-20</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter.forth"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># dput(names(EGAS))</span></span>
<span><span class="va">CT_EGAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CT_EGAS"</span>,</span>
<span>  <span class="co"># desc = "Constraint on new Hydro plants construction",</span></span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">2055</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">EGAS</span><span class="op">)</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span>, <span class="fl">2055</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">5</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter.forth"</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># limit on hydro construction</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#No Base year investment</span></span>
<span><span class="va">NO_BY_INV</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NO_BY_INV"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>      region <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2020</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-20</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"inter"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Constraint on Solar Capacity Deployment across regions</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">CT_ESOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CT_ESOL"</span>,</span>
<span>  <span class="co"># desc = "Constraint on new solar plants construction",</span></span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"EAST"</span>, <span class="st">"NORTH"</span>, <span class="st">"NORTHEAST"</span>, <span class="st">"SOUTH"</span>, <span class="st">"WEST"</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>  variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechCap"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/dput.html" class="external-link">dput</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">)</span><span class="op">)</span>,</span>
<span>      years <span class="op">=</span> <span class="cn">NULL</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>,</span>
<span>    region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"NORTH"</span>,<span class="st">"SOUTH"</span>, <span class="st">"EAST"</span>,<span class="st">"WEST"</span>,<span class="st">"NORTHEAST"</span><span class="op">)</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">336.250</span>, <span class="fl">107.330</span>, <span class="fl">66.360</span>, <span class="fl">180.9</span>, <span class="fl">57.36</span><span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="cn">Inf</span>,</span>
<span>  interpolation <span class="op">=</span> <span class="st">"back.inter.forth"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; c("ESOL_2020", "ESOL_2030", "ESOL_2040", "ESOL_2050")</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="model">Model<a class="anchor" aria-label="anchor" href="#model"></a>
</h3>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">repo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"repo_electricity_{regN}"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add</span><span class="op">(</span></span>
<span>    <span class="co"># commodities</span></span>
<span>    <span class="va">repo_comm</span>,</span>
<span>    <span class="co"># supply &amp; import</span></span>
<span>    <span class="va">repo_supply</span>,</span>
<span>    <span class="co"># Generating technologies</span></span>
<span>    <span class="va">ECOA</span>, </span>
<span>    <span class="va">EGAS</span>, <span class="va">CT_EGAS</span>, </span>
<span>    <span class="va">ENUC</span>,</span>
<span>    <span class="va">NO_NEW_NUCLEAR</span>, <span class="co"># limit on nuclear construction</span></span>
<span>    <span class="va">EHYD</span>, <span class="va">WHYD</span>,</span>
<span>    <span class="va">NO_NEW_HYDRO</span>, <span class="co"># limit on hydro construction</span></span>
<span>    <span class="va">ESOL</span>, <span class="va">WSOL</span>, </span>
<span>    <span class="va">EWIN</span>, <span class="va">WWIN</span>,</span>
<span>    <span class="va">EBIO</span>,</span>
<span>    <span class="co"># battery</span></span>
<span>    <span class="co"># STG_BTR, # add during interpolation or solving - one of the options</span></span>
<span>    <span class="co"># STG_BTR_daily, # add during interpolation or solving - one of...</span></span>
<span>    <span class="co"># transmission</span></span>
<span>    <span class="va">repo_transmission</span>,</span>
<span>    <span class="va">repo_geoccs</span>,</span>
<span>    <span class="va">repo_ccstechs</span>,</span>
<span>    <span class="co"># unserved load</span></span>
<span>    <span class="va">UNSERVED</span>, <span class="co"># unserved load penalty</span></span>
<span>    <span class="co"># demand</span></span>
<span>    <span class="va">DEMELC_BY</span>, <span class="co"># BY demand</span></span>
<span>    <span class="va">DEMELC_2X</span>, <span class="co"># additional demand</span></span>
<span>    <span class="va">CT_ESOL</span>, <span class="co"># solar capacity constraints</span></span>
<span>    <span class="va">NO_BY_INV</span> <span class="co">#</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># print(repo)</span></span>
<span><span class="co"># names(repo)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">repo</span><span class="op">)</span></span>
<span><span class="co">#&gt;  commodity constraint     demand     import     supply technology      trade </span></span>
<span><span class="co">#&gt;         14          5          2          5          6         37          7 </span></span>
<span><span class="co">#&gt;    weather </span></span>
<span><span class="co">#&gt;          3</span></span>
<span></span>
<span><span class="co"># model horizon</span></span>
<span><span class="va">horizon_2020_2060_by_10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/horizon.html" class="external-link">newHorizon</a></span><span class="op">(</span></span>
<span>  period <span class="op">=</span> <span class="fl">2020</span><span class="op">:</span><span class="fl">2060</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span><span class="op">)</span><span class="op">)</span>, </span>
<span>  mid_is_end <span class="op">=</span> <span class="cn">T</span></span>
<span><span class="op">)</span></span>
<span><span class="va">horizon_2020_2060_by_10</span></span>
<span><span class="co">#&gt; An object of class "horizon"</span></span>
<span><span class="co">#&gt; Slot "desc":</span></span>
<span><span class="co">#&gt; character(0)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "period":</span></span>
<span><span class="co">#&gt;  [1] 2020 2021 2022 2023 2024 2025 2026 2027 2028 2029 2030 2031 2032 2033 2034</span></span>
<span><span class="co">#&gt; [16] 2035 2036 2037 2038 2039 2040 2041 2042 2043 2044 2045 2046 2047 2048 2049</span></span>
<span><span class="co">#&gt; [31] 2050 2051 2052 2053 2054 2055 2056 2057 2058 2059 2060</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Slot "intervals":</span></span>
<span><span class="co">#&gt;    start   mid   end</span></span>
<span><span class="co">#&gt;    &lt;num&gt; &lt;num&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:  2020  2020  2020</span></span>
<span><span class="co">#&gt; 2:  2021  2025  2025</span></span>
<span><span class="co">#&gt; 3:  2026  2035  2035</span></span>
<span><span class="co">#&gt; 4:  2036  2045  2045</span></span>
<span><span class="co">#&gt; 5:  2046  2055  2055</span></span>
<span><span class="co">#&gt; 6:  2056  2060  2060</span></span>
<span></span>
<span><span class="co"># model-class object</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/newModel.html" class="external-link">newModel</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"IDEEA_r7_base"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"IDEEA example model"</span>,</span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">gis_sf</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>,</span>
<span>  discount <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  calendar <span class="op">=</span> <span class="va">full_calendar_d365_h24</span>,</span>
<span>  horizon <span class="op">=</span> <span class="va">horizon_2020_2060_by_10</span>,</span>
<span>  data <span class="op">=</span> <span class="va">repo</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># mod@config@horizon@intervals</span></span>
<span><span class="co"># mod@config@calendar@timetable</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="solving-the-model">Solving the model<a class="anchor" aria-label="anchor" href="#solving-the-model"></a>
</h2>
<p>Note: The full model requires powerful solver (CPLEX or GUROBI) and
GAMS Julia or Python + CPLEX/GUROBI will also work, but currently
require more time to generate the problem for the solver.<br>
It is recommended to solve the model for a portion of a year (subset of
time-slices), which can be solved with free solvers such as HiGHS or
Cbc.</p>
<div class="section level3">
<h3 id="reference-scenario---subset">Reference scenario - subset<a class="anchor" aria-label="anchor" href="#reference-scenario---subset"></a>
</h3>
<p>Quick way to have a glimpse of the results</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set_progress_bar("progress")</span></span>
<span><span class="co"># set_scenarios_path("D:/Dropbox/Xeon_link/IDEEA-xeon/scenarios")</span></span>
<span><span class="co"># Reference case</span></span>
<span><span class="va">scen_base_sub</span> <span class="op">&lt;-</span> <span class="fu">interpolate</span><span class="op">(</span></span>
<span>  <span class="va">mod</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"BASE_sub"</span>,</span>
<span>  <span class="va">STG_BTR_daily</span>, <span class="co"># Battery, modeled with daily cycle for sampled calendar</span></span>
<span>  <span class="va">partial_calendar</span> <span class="co"># add partial calendar to the interpolate function</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">scen_base_sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/write.html" class="external-link">write_sc</a></span><span class="op">(</span></span>
<span>  <span class="va">scen_base_sub</span>,</span>
<span>  <span class="co"># solver = solver_options$gams_gdx_cplex_parallel</span></span>
<span>  <span class="co"># solver = solver_options$julia_highs_barrier</span></span>
<span>  <span class="co"># solver = solver_options$julia_highs_simplex</span></span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">julia_highs_parallel</span></span>
<span><span class="op">)</span></span>
<span><span class="va">scen_base_sub</span><span class="op">@</span><span class="va">status</span></span>
<span><span class="va">scen_base_sub</span><span class="op">@</span><span class="va">misc</span><span class="op">$</span><span class="va">tmp.dir</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/solve.html" class="external-link">solve_scenario</a></span><span class="op">(</span><span class="va">scen_base_sub</span>, wait <span class="op">=</span> <span class="cn">F</span>, force <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co"># solve(scen_base_sub, wait = F)</span></span>
<span><span class="va">scen_base_sub</span> <span class="op">&lt;-</span> <span class="fu">read</span><span class="op">(</span><span class="va">scen_base_sub</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">scen_base_sub</span>, <span class="st">"vBalance"</span>, comm <span class="op">=</span> <span class="st">"CO2"</span>, merge <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span>, <span class="va">comm</span>, <span class="va">year</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">scen_base_sub</span>, <span class="st">"vTechNewCap"</span>, tech_ <span class="op">=</span> <span class="st">"ESOL"</span>, merge <span class="op">=</span> <span class="cn">T</span>, </span>
<span>        process <span class="op">=</span> <span class="cn">T</span>, drop.zeros <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/drop_process_vintage.html">drop_process_vintage</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">scenario</span>, <span class="va">region</span>, <span class="va">process</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">region</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/energyRt/man/getData.html" class="external-link">getData</a></span><span class="op">(</span><span class="va">scen_base_sub</span>, <span class="st">"vTechNewCap"</span>, drop.zeros <span class="op">=</span> <span class="cn">T</span>, </span>
<span>        merge <span class="op">=</span> <span class="cn">T</span>, digits <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by IDEEA comunity.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
