<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Karnataka electric power sector capacity expansion model • IDEEA</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Karnataka electric power sector capacity expansion model">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-1FN9MK20PS"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-1FN9MK20PS');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IDEEA</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.50.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/IDEEA.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/about.html">About</a></li>
    <li><a class="dropdown-item" href="../articles/help.html">Help</a></li>
    <li><a class="dropdown-item" href="../articles/install.html">Installation</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>IDEEA model components</h6></li>
    <li><a class="dropdown-item" href="../articles/regions.html">—Regions</a></li>
    <li><a class="dropdown-item" href="../articles/calendars.html">—Time</a></li>
    <li><a class="dropdown-item" href="../articles/data.html">—Datasets</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>IDEEA model sectors</h6></li>
    <li><a class="dropdown-item" href="../articles/energy.html">—Energy</a></li>
    <li><a class="dropdown-item" href="../articles/electricity.html">—Electricity</a></li>
    <li><a class="dropdown-item" href="../articles/transmission.html">—Transmission</a></li>
    <li><a class="dropdown-item" href="../articles/hydrogen.html">—Hydrogen</a></li>
    <li><a class="dropdown-item" href="../articles/ccus.html">—CCUS</a></li>
    <li><a class="dropdown-item" href="../articles/reports.html">—Reports</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Regional models</h6></li>
    <li><a class="dropdown-item" href="../articles/karnataka.html">—Karnataka</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Sectors in development</h6></li>
    <li><a class="dropdown-item" href="../articles/transport.html">—Transport</a></li>
    <li><a class="dropdown-item" href="../articles/buildings.html">—Buildings</a></li>
    <li><a class="dropdown-item" href="../articles/iron_steel.html">—Iron and Stell</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>—Refineries</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>—Cement and Clinker</h6></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>IDEEA in Switch (in work)</h6></li>
    <li><h6 class="dropdown-header" data-toc-skip>IDEEA in PyPSA (planned)</h6></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ideea-model/IDEEA/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Karnataka electric power sector capacity expansion model</h1>
            <h3 data-toc-skip class="subtitle">One region, coperplate
version (this documentation is in progress)</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ideea-model/IDEEA/blob/HEAD/vignettes/articles/karnataka.Rmd" class="external-link"><code>vignettes/articles/karnataka.Rmd</code></a></small>
      <div class="d-none name"><code>karnataka.Rmd</code></div>
    </div>

    
    
<!-- devtools::load_all(".") -->
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ideea-model.github.io/IDEEA">IDEEA</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggrepel.slowkow.com/" class="external-link">ggrepel</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.fstpackage.org" class="external-link">fst</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="configuration">Configuration<a class="anchor" aria-label="anchor" href="#configuration"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tmz</span> <span class="op">&lt;-</span> <span class="st">"Asia/Kolkata"</span> <span class="co"># model timezone</span></span>
<span><span class="va">baseYear</span> <span class="op">&lt;-</span> <span class="fl">2019</span> <span class="co"># model base year</span></span>
<span><span class="co"># modYears &lt;- c(baseYear + c(0, 2), seq(2025, 2060, by = 5)) # model years</span></span>
<span><span class="co"># weaYears &lt;- 2019 # weather years (from MERRA-2)</span></span>
<span></span>
<span><span class="co"># Currency conversion</span></span>
<span><span class="va">INR_Crore_2_USD</span> <span class="op">&lt;-</span> <span class="fl">136825.20</span> <span class="co"># Google converter, Jan 13, 2021</span></span>
<span><span class="va">INR_2_USD</span> <span class="op">&lt;-</span> <span class="va">INR_Crore_2_USD</span> <span class="op">/</span> <span class="fl">1e7</span></span>
<span><span class="va">INR_Crore_2_MUSD</span> <span class="op">&lt;-</span> <span class="va">INR_Crore_2_USD</span><span class="op">/</span><span class="fl">1e6</span> </span>
<span><span class="va">INR_Lakh_2_MUSD</span> <span class="op">&lt;-</span> <span class="va">INR_Crore_2_MUSD</span><span class="op">/</span><span class="fl">100</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ideea_sf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_ideea_map.html">get_ideea_map</a></span><span class="op">(</span>nreg <span class="op">=</span> <span class="fl">32</span>, offshore <span class="op">=</span> <span class="cn">FALSE</span>, ROW <span class="op">=</span> <span class="cn">FALSE</span>, rename <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">karnataka_sf</span> <span class="op">&lt;-</span> <span class="va">ideea_sf</span><span class="op">[</span><span class="va">ideea_sf</span><span class="op">$</span><span class="va">region</span> <span class="op">==</span> <span class="st">"KA"</span>, <span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ideea_sf</span><span class="op">[</span><span class="st">"region"</span><span class="op">]</span>, col <span class="op">=</span> <span class="cn">NA</span>, reset <span class="op">=</span> <span class="cn">F</span>, main <span class="op">=</span> <span class="st">"Karnataka"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">karnataka_sf</span><span class="op">[</span><span class="st">"region"</span><span class="op">]</span>, col <span class="op">=</span> <span class="st">"red"</span>, add <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="karnataka_files/figure-html/unnamed-chunk-3-1.png" width="2187.5"></p>
</div>
<div class="section level3">
<h3 id="weather-classes">Weather classes<a class="anchor" aria-label="anchor" href="#weather-classes"></a>
</h3>
<div class="section level4">
<h4 id="wind-by-resource-class">Wind (by resource class)<a class="anchor" aria-label="anchor" href="#wind-by-resource-class"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generating capacity</span></span>
<span><span class="va">gen_cap</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">capacity_MW</span></span>
<span><span class="co"># wind capacity factors</span></span>
<span><span class="va">wind_cf</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">wind_cf</span></span>
<span><span class="co"># wind and solar average potential estimates</span></span>
<span><span class="va">merra_CF_mean</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">merra_CF_mean</span></span>
<span><span class="co"># wind_loc_sf &lt;- ideea_data$karnataka$wind_loc_sf</span></span>
<span></span>
<span><span class="op">(</span><span class="va">wind_120m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">merra_CF_mean</span><span class="op">$</span><span class="va">af120m_class</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "AF20" "AF25" "AF15" "AF30" "AF35"</span></span>
<span><span class="va">ww</span> <span class="op">&lt;-</span> <span class="va">merra_CF_mean</span><span class="op">$</span><span class="va">af120m_class</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">wind_120m</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">karnataka_sf</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"wheat"</span>,</span>
<span>    colour <span class="op">=</span> <span class="st">"white"</span>, alpha <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">.5</span>, show.legend <span class="op">=</span> <span class="cn">F</span></span>
<span>  <span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_void</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># ggplot(merra_CF_mean[ww,]) +</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span>, fill <span class="op">=</span> <span class="va">af120m</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">merra_CF_mean</span>,</span>
<span>    inherit.aes <span class="op">=</span> <span class="cn">F</span>, alpha <span class="op">=</span> <span class="fl">.75</span>, show.legend <span class="op">=</span> <span class="cn">T</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_brewer.html" class="external-link">scale_fill_distiller</a></span><span class="op">(</span></span>
<span>    palette <span class="op">=</span> <span class="st">"YlGnBu"</span>, name <span class="op">=</span> <span class="st">"CF 120m"</span>, direction <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="cn">NA</span><span class="op">)</span>, na.value <span class="op">=</span> <span class="st">"grey70"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html" class="external-link">geom_tile</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">merra_CF_mean</span><span class="op">[</span><span class="va">ww</span>, <span class="op">]</span>, </span>
<span>    colour <span class="op">=</span> <span class="st">"red"</span>, fill <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    inherit.aes <span class="op">=</span> <span class="cn">F</span>, show.legend <span class="op">=</span> <span class="cn">T</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span>, colour <span class="op">=</span> <span class="st">"grey"</span>, alpha <span class="op">=</span> <span class="fl">1</span>, size <span class="op">=</span> <span class="fl">.5</span>, </span>
<span>          data <span class="op">=</span> <span class="va">karnataka_sf</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">lon</span>, <span class="va">lat</span>, size <span class="op">=</span> <span class="va">capacity_mw</span><span class="op">)</span>,</span>
<span>             colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>             data <span class="op">=</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">wind_loc_sf</span>, </span>
<span>             inherit.aes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Wind capacity factors and installed capacity in Karnataka"</span></span>
<span>    <span class="co"># subtitle = "Wind resource classes and potential locations",</span></span>
<span>    <span class="co"># caption = "Source: MERRA-2, WRI, IDEEA"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="karnataka_files/figure-html/unnamed-chunk-4-1.png" width="2187.5"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="co"># theme_ideea_map()</span></span>
<span>  </span>
<span></span>
<span><span class="co"># Create weather-class for every AF-type of the resource</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">wind_cf</span><span class="op">$</span><span class="va">wcf_120m</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt; 0.01405 0.21568 0.36705 0.35481 0.47791 0.75000</span></span>
<span><span class="va">WWIN_120m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span><span class="st">"WWIN_120m"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">wind_120m</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">ii</span> <span class="op">&lt;-</span> <span class="va">wind_cf</span><span class="op">$</span><span class="va">af120m_class</span> <span class="op">==</span> <span class="va">i</span></span>
<span>  <span class="va">WWIN_i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newWeather.html" class="external-link">newWeather</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"WWIN_"</span>, <span class="va">i</span><span class="op">)</span>,</span>
<span>    <span class="co"># desc = "",</span></span>
<span>    <span class="co"># unit = "kWh/kWh_max",</span></span>
<span>    timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>    weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>      <span class="co"># region = as.character(),</span></span>
<span>      <span class="co"># year = merra_CF_mean$mYear[ii],</span></span>
<span>      slice <span class="op">=</span> <span class="va">wind_cf</span><span class="op">$</span><span class="va">slice</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span>,</span>
<span>      wval <span class="op">=</span> <span class="va">wind_cf</span><span class="op">$</span><span class="va">wcf_120m</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> </span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">WWIN_120m</span> <span class="op">&lt;-</span> <span class="fu">add</span><span class="op">(</span><span class="va">WWIN_120m</span>, <span class="va">WWIN_i</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">WWIN_120m</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "WWIN_AF20" "WWIN_AF25" "WWIN_AF15" "WWIN_AF30" "WWIN_AF35"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="solar-regional-average">Solar (regional average)<a class="anchor" aria-label="anchor" href="#solar-regional-average"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># solar average capacity factors</span></span>
<span><span class="va">solar_cf</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">solar_cf</span></span>
<span></span>
<span><span class="co"># Create weather-class for solar resource (average)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">solar_cf</span><span class="op">$</span><span class="va">scf</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. </span></span>
<span><span class="co">#&gt; 0.00000 0.00000 0.01139 0.24138 0.48715 1.00000</span></span>
<span><span class="va">WSOL_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newWeather.html" class="external-link">newWeather</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"WSOL"</span>,</span>
<span>  <span class="co"># desc = "",</span></span>
<span>  <span class="co"># unit = "kWh/kWh_max",</span></span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="va">solar_cf</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    wval <span class="op">=</span> <span class="va">solar_cf</span><span class="op">$</span><span class="va">scf</span> </span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># gen_cap$cap_MW[grepl("Solar", gen_cap$enSource)] / 1e3 *</span></span>
<span><span class="co">#   sum(merra_sol_mean$afsol)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="hydro-reservoirs-inflows">Hydro (reservoirs inflows)<a class="anchor" aria-label="anchor" href="#hydro-reservoirs-inflows"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Inflow and discharge data of reservoirs</span></span>
<span><span class="va">w_hyd</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">reservoir</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/IDateTime.html" class="external-link">year</a></span><span class="op">(</span><span class="va">datetime</span><span class="op">)</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">baseYear</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_date</a></span><span class="op">(</span><span class="va">datetime</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">datetime</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>slice <span class="op">=</span> <span class="fu">dtm2tsl</span><span class="op">(</span><span class="va">date</span>, format <span class="op">=</span> <span class="st">"d365"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">w_hyd</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rspatial.github.io/terra/reference/dimensions.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">)</span><span class="op">)</span>,<span class="op">]</span> <span class="co"># accumulated energy -first and last days of the year</span></span>
<span><span class="co">#&gt;    DISCHARGE_MU EQENERGY_MU INFLOW_MU       date  slice</span></span>
<span><span class="co">#&gt;           &lt;num&gt;       &lt;num&gt;     &lt;num&gt;     &lt;Date&gt; &lt;char&gt;</span></span>
<span><span class="co">#&gt; 1:    -28.19596    6133.078  2.625201 2019-01-01   d001</span></span>
<span><span class="co">#&gt; 2:    -33.75062    7136.870  8.159480 2019-12-31   d365</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">INFLOW_MU</span><span class="op">)</span> <span class="co"># total inflow</span></span>
<span><span class="co">#&gt; [1] 9773.639</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">DISCHARGE_MU</span><span class="op">)</span> <span class="co"># total discharge (!some days are missing in the data-Adjusting Coefficient)</span></span>
<span><span class="co">#&gt; [1] -8006.358</span></span>
<span></span>
<span><span class="co"># Adjust the 3-dams data, adding reservoirs with missing info</span></span>
<span><span class="va">gen_cap</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;    year enSource   cap_MW  gen_MU     af type      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>019 Biomass      134.    86.5 0.073<span style="text-decoration: underline;">6</span> biomass   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>019 Hydro       <span style="text-decoration: underline;">4</span>665. <span style="text-decoration: underline;">14</span>327.  0.351  hydro     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>019 Net_Import  <span style="text-decoration: underline;">4</span>133. <span style="text-decoration: underline;">20</span>562.  0.568  net_import</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>019 Solar       <span style="text-decoration: underline;">7</span>038  <span style="text-decoration: underline;">11</span>524.  0.216  solar     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>019 Thermal    <span style="text-decoration: underline;">10</span>379. <span style="text-decoration: underline;">16</span>578.  0.182  thermal   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>019 Wind        <span style="text-decoration: underline;">4</span>778.  <span style="text-decoration: underline;">8</span>528.  0.204  wind</span></span>
<span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Hydro"</span>, <span class="va">gen_cap</span><span class="op">$</span><span class="va">enSource</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Mode   FALSE    TRUE </span></span>
<span><span class="co">#&gt; logical       5       1</span></span>
<span><span class="va">gen_cap</span><span class="op">$</span><span class="va">gen_MU</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 14327.19</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">INFLOW_MU</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 9773.639</span></span>
<span><span class="op">(</span><span class="va">hyd_adj</span> <span class="op">&lt;-</span> <span class="va">gen_cap</span><span class="op">$</span><span class="va">gen_MU</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">INFLOW_MU</span><span class="op">)</span><span class="op">)</span> <span class="co"># Adjusting Coefficient</span></span>
<span><span class="co">#&gt; [1] 1.465901</span></span>
<span></span>
<span><span class="co"># Hydro   weather class repository </span></span>
<span><span class="va">WHYD_AF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newWeather.html" class="external-link">newWeather</a></span><span class="op">(</span><span class="st">"WHYD_AF"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Exogenous hydro energy inflow"</span>,</span>
<span>  region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"YDAY"</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    <span class="co"># year = 2010,</span></span>
<span>    slice <span class="op">=</span> <span class="va">w_hyd</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    wval <span class="op">=</span> <span class="va">w_hyd</span><span class="op">$</span><span class="va">INFLOW_MU</span> <span class="op">*</span> <span class="va">hyd_adj</span> <span class="co"># assumption</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="generating-technologies">Generating technologies<a class="anchor" aria-label="anchor" href="#generating-technologies"></a>
</h3>
<div class="section level4">
<h4 id="thermal">Thermal<a class="anchor" aria-label="anchor" href="#thermal"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gen_cap</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;    year enSource   cap_MW  gen_MU     af type      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">2</span>019 Biomass      134.    86.5 0.073<span style="text-decoration: underline;">6</span> biomass   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">2</span>019 Hydro       <span style="text-decoration: underline;">4</span>665. <span style="text-decoration: underline;">14</span>327.  0.351  hydro     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">2</span>019 Net_Import  <span style="text-decoration: underline;">4</span>133. <span style="text-decoration: underline;">20</span>562.  0.568  net_import</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">2</span>019 Solar       <span style="text-decoration: underline;">7</span>038  <span style="text-decoration: underline;">11</span>524.  0.216  solar     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">2</span>019 Thermal    <span style="text-decoration: underline;">10</span>379. <span style="text-decoration: underline;">16</span>578.  0.182  thermal   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">2</span>019 Wind        <span style="text-decoration: underline;">4</span>778.  <span style="text-decoration: underline;">8</span>528.  0.204  wind</span></span>
<span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Thermal"</span>, <span class="va">gen_cap</span><span class="op">$</span><span class="va">enSource</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Mode   FALSE    TRUE </span></span>
<span><span class="co">#&gt; logical       5       1</span></span>
<span><span class="va">ECOA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/technology.html" class="external-link">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ECOA"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic Coal-fired power plant, base year"</span>,</span>
<span>  <span class="co"># region = ppb$region[ii],</span></span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"COA"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">24</span> <span class="op">*</span> <span class="fl">365</span>,</span>
<span>  ceff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"COA"</span><span class="op">)</span>,</span>
<span>    cinp2use <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.35</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    af.lo <span class="op">=</span> <span class="fl">.2</span>, <span class="co"># aggregated lower bound</span></span>
<span>    rampup <span class="op">=</span> <span class="fl">48</span>, <span class="co"># hours, cold start from 0 to 100, assumption</span></span>
<span>    rampdown <span class="op">=</span> <span class="fl">48</span> <span class="co"># assumption</span></span>
<span>  <span class="op">)</span>,</span>
<span>  afs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="st">"ANNUAL"</span>,</span>
<span>    afs.up <span class="op">=</span> <span class="fl">.6</span>, <span class="co"># assumption</span></span>
<span>    afs.lo <span class="op">=</span> <span class="fl">.2</span> <span class="co"># assumption</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># fixom = .05 * 800 # 5% a year of invcost (800 USD/kW)</span></span>
<span>    fixom <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">11.7</span> <span class="op">*</span> <span class="va">INR_Lakh_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  varom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># varom = 0.01 # USD/kWh - assumption</span></span>
<span>    <span class="co"># convert("USD/kWh", "MUSD/GWh", 1)</span></span>
<span>    varom <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kWh"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">0.6</span> <span class="op">*</span> <span class="va">INR_2_USD</span><span class="op">)</span> </span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">8.02</span> <span class="op">*</span> <span class="va">INR_Crore_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">baseYear</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2040</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span>, <span class="fl">0.7</span> <span class="op">*</span> <span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span><span class="op">)</span> <span class="co"># assumption</span></span>
<span>  <span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    end <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">25</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/draw.html" class="external-link">draw</a></span><span class="op">(</span><span class="va">ECOA</span><span class="op">)</span></span></code></pre></div>
<p><img src="karnataka_files/figure-html/unnamed-chunk-7-1.png" width="2187.5"></p>
</div>
<div class="section level4">
<h4 id="hydro">Hydro<a class="anchor" aria-label="anchor" href="#hydro"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Hydro"</span>, <span class="va">gen_cap</span><span class="op">$</span><span class="va">enSource</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># check</span></span>
<span><span class="va">EHYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/technology.html" class="external-link">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EHYD"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Hydro power plants"</span>,</span>
<span>  <span class="co"># region = ppb$region[ii],</span></span>
<span>  region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"HYD"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># aux = list(acomm = "DAM"),</span></span>
<span>  cap2act <span class="op">=</span> <span class="fl">24</span> <span class="op">*</span> <span class="fl">365</span>,</span>
<span>  <span class="co"># ceff = list(</span></span>
<span>  <span class="co">#   comm = c("HYD"),</span></span>
<span>  <span class="co">#   cinp2use = c(1)</span></span>
<span>  <span class="co"># ),</span></span>
<span>  <span class="co"># aeff = data.frame(</span></span>
<span>  <span class="co">#   acomm = "DAM",</span></span>
<span>  <span class="co">#   comm = "HYD",</span></span>
<span>  <span class="co">#   cinp2ainp  = 1</span></span>
<span>  <span class="co"># ),</span></span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    af.lo <span class="op">=</span> <span class="fl">.1</span>, <span class="co"># aggregated lower bound</span></span>
<span>    <span class="co"># rampup = 4, # hours, cold start from 0 to 100, assumption</span></span>
<span>    rampdown <span class="op">=</span> <span class="fl">8</span> <span class="co"># assumption</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># af = list(</span></span>
<span>  <span class="co">#   # region = ppb$region[ii],</span></span>
<span>  <span class="co">#   # slice = ,</span></span>
<span>  <span class="co">#   af.fx = ppb$af[ii]</span></span>
<span>  <span class="co"># ),</span></span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    fixom <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">20</span> <span class="op">*</span> <span class="va">INR_Lakh_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># varom = list(</span></span>
<span>  <span class="co">#   varom =</span></span>
<span>  <span class="co"># ),</span></span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = 2010,</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">8.02</span> <span class="op">*</span> <span class="va">INR_Crore_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">baseYear</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2060</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span>, <span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># start = list(</span></span>
<span>  <span class="co">#   start = 2060</span></span>
<span>  <span class="co"># ),</span></span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    end <span class="op">=</span> <span class="fl">2010</span></span>
<span>  <span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">40</span></span>
<span>  <span class="op">)</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/draw.html" class="external-link">draw</a></span><span class="op">(</span><span class="va">EHYD</span><span class="op">)</span></span></code></pre></div>
<p><img src="karnataka_files/figure-html/unnamed-chunk-8-1.png" width="2187.5"></p>
</div>
<div class="section level4">
<h4 id="solar">Solar<a class="anchor" aria-label="anchor" href="#solar"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Solar"</span>, <span class="va">gen_cap</span><span class="op">$</span><span class="va">enSource</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/stopifnot.html" class="external-link">stopifnot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="co"># check</span></span>
<span><span class="va">ESOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/technology.html" class="external-link">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"ESOL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Utility Scale Solar PV"</span>,</span>
<span>  <span class="co"># region = "AZ",</span></span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"SOL"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">24</span>,</span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    af.fx <span class="op">=</span> <span class="fl">1</span> <span class="co"># forcing output when resource is available</span></span>
<span>  <span class="op">)</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    weather <span class="op">=</span> <span class="st">"WSOL"</span>,</span>
<span>    waf.fx <span class="op">=</span> <span class="fl">1</span> <span class="co"># weather factor (multiplier) will be applied to af.fx</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># fixom = 10 # assumed, 1% of investment costs a year</span></span>
<span>    fixom <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">4.5</span> <span class="op">*</span> <span class="va">INR_Lakh_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Assuming 1$/Watt</span></span>
<span>    <span class="co"># https://www.nrel.gov/news/press/2017/nrel-report-utility-scale-solar-pv-system-cost-fell-last-year.html</span></span>
<span>    <span class="co"># invcost = 1000 # convert("USD/W", "MUSD/GW", 1)</span></span>
<span>     invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">3.4</span> <span class="op">*</span> <span class="va">INR_Crore_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  </span>
<span>capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">baseYear</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2040</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2050</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span>, </span>
<span>              <span class="fl">0.8</span> <span class="op">*</span> <span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span>,</span>
<span>              <span class="fl">0</span> <span class="op">*</span> <span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># start = list(</span></span>
<span>  <span class="co">#   start = 2017</span></span>
<span>  <span class="co"># ),</span></span>
<span>  <span class="co"># end = list(end = 2000),</span></span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">25</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/draw.html" class="external-link">draw</a></span><span class="op">(</span><span class="va">ESOL</span><span class="op">)</span></span></code></pre></div>
<p><img src="karnataka_files/figure-html/unnamed-chunk-9-1.png" width="2187.5"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># bulk solar resource</span></span>
<span><span class="va">sol_max_GW</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">solar_max_GW</span></span>
<span><span class="co"># Limits on solar total capacity</span></span>
<span><span class="va">CSOL_UP</span> <span class="op">&lt;-</span> <span class="fu">newConstraintS</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CSOL_UP"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"capacity"</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    tech <span class="op">=</span> <span class="st">"ESOL"</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span></span>
<span>    <span class="co"># region = reg_area$region</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    tech <span class="op">=</span> <span class="st">"ESOL"</span>,</span>
<span>    region <span class="op">=</span> <span class="va">sol_max_GW</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    <span class="co"># up to 2% of territory per region</span></span>
<span>    rhs <span class="op">=</span> <span class="fl">0.02</span> <span class="op">*</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">sol_max_GW</span><span class="op">$</span><span class="va">max_GW</span>, <span class="fl">1e-20</span><span class="op">)</span> </span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span> <span class="co"># to avoid dropping zeros in some solvers</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="wind">Wind<a class="anchor" aria-label="anchor" href="#wind"></a>
</h4>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"Wind"</span>, <span class="va">gen_cap</span><span class="op">$</span><span class="va">enSource</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span></span>
<span><span class="co">#&gt;    Mode   FALSE    TRUE </span></span>
<span><span class="co">#&gt; logical       5       1</span></span>
<span><span class="va">EWIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/technology.html" class="external-link">newTechnology</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EWIN"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Onshore wind farm"</span>,</span>
<span>  <span class="co"># WIN10_AF@region, # Limiting to regions with available resource</span></span>
<span>  input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"WIN"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>    combustion <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span>,</span>
<span>  output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>    unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  cap2act <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">24</span>,</span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    af.fx <span class="op">=</span> <span class="fl">1</span> <span class="co"># forcing output when resource is available</span></span>
<span>  <span class="op">)</span>,</span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    weather <span class="op">=</span> <span class="st">"WWIN"</span>, <span class="co"># assumption</span></span>
<span>    waf.fx <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="co"># waf.up = c(1) #</span></span>
<span>  <span class="op">)</span>,</span>
<span>  fixom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># fixom = 15 # Assumed, 1% a year</span></span>
<span>    fixom <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">8</span> <span class="op">*</span> <span class="va">INR_Lakh_2_MUSD</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># Assuming 1.5$/Watt</span></span>
<span>    <span class="co"># https://www.irena.org/-/media/Files/IRENA/Agency/Publication/2018/Jan/IRENA_2017_Power_Costs_2018.pdf</span></span>
<span>    <span class="co"># invcost = 1500 #</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"MUSD/MW"</span>, <span class="st">"MUSD/GW"</span>, <span class="fl">6</span> <span class="op">*</span> <span class="va">INR_Crore_2_MUSD</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">)</span>,</span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="va">baseYear</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span>, </span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2040</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span>,</span>
<span>             <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">2050</span>, <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span>, </span>
<span>              <span class="fl">0.8</span> <span class="op">*</span> <span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span> <span class="op">/</span> <span class="fl">1e3</span>,</span>
<span>              <span class="fl">0</span> <span class="op">*</span> <span class="va">gen_cap</span><span class="op">$</span><span class="va">cap_MW</span><span class="op">[</span><span class="va">ii</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># start = list(</span></span>
<span>  <span class="co">#   start = 2017</span></span>
<span>  <span class="co"># ),</span></span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span>,</span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    olife <span class="op">=</span> <span class="fl">25</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/draw.html" class="external-link">draw</a></span><span class="op">(</span><span class="va">EWIN</span><span class="op">)</span></span></code></pre></div>
<p><img src="karnataka_files/figure-html/unnamed-chunk-10-1.png" width="2187.5"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">EWIN_120m</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span><span class="st">"EWIN_120m"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">WWIN_120m</span><span class="op">@</span><span class="va">data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">wName</span> <span class="op">&lt;-</span> <span class="va">WWIN_120m</span><span class="op">@</span><span class="va">data</span><span class="op">[[</span><span class="va">i</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">name</span></span>
<span>  <span class="va">tName</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">gsub</a></span><span class="op">(</span><span class="st">"WWIN_"</span>, <span class="st">"EWIN_"</span>, <span class="va">wName</span><span class="op">)</span></span>
<span>  <span class="va">EWIN_i</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/technology.html" class="external-link">newTechnology</a></span><span class="op">(</span></span>
<span>    name <span class="op">=</span> <span class="va">tName</span>,</span>
<span>    desc <span class="op">=</span> <span class="st">"Utility Scale Solar PV"</span>,</span>
<span>    <span class="co"># region = "AZ",</span></span>
<span>    input <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      comm <span class="op">=</span> <span class="st">"SOL"</span>,</span>
<span>      unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    output <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      comm <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>      unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>    <span class="op">)</span>,</span>
<span>    cap2act <span class="op">=</span> <span class="fl">365</span> <span class="op">*</span> <span class="fl">24</span>,</span>
<span>    af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      af.fx <span class="op">=</span> <span class="fl">1</span> <span class="co"># forcing output when resource is available</span></span>
<span>    <span class="op">)</span>,</span>
<span>    weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      weather <span class="op">=</span> <span class="va">wName</span>,</span>
<span>      waf.fx <span class="op">=</span> <span class="fl">1</span> <span class="co"># weather factor (multiplier) will be applied to af.fx</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="co"># fixom = list(</span></span>
<span>    <span class="co">#   fixom = 10 # assumed, 1% of investment costs a year</span></span>
<span>    <span class="co"># ),</span></span>
<span>    invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="co"># Assuming 1$/Watt</span></span>
<span>      <span class="co"># https://www.nrel.gov/news/press/2017/nrel-report-utility-scale-solar-pv-system-cost-fell-last-year.html</span></span>
<span>      invcost <span class="op">=</span> <span class="fl">1000</span> <span class="co"># convert("USD/W", "MUSD/GW", 1)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="co"># start = list(</span></span>
<span>    <span class="co">#   start = 2017</span></span>
<span>    <span class="co"># ),</span></span>
<span>    <span class="co"># end = list(end = 2030),</span></span>
<span>    olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      olife <span class="op">=</span> <span class="fl">25</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">EWIN_120m</span> <span class="op">&lt;-</span> <span class="fu">add</span><span class="op">(</span><span class="va">EWIN_120m</span>, <span class="va">EWIN_i</span><span class="op">)</span></span>
<span>  <span class="co"># draw(EWIN)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># estimated bulk wind resource</span></span>
<span><span class="va">win_max_GW</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">wind_max_GW</span></span>
<span><span class="co"># Limits on wind total capacity</span></span>
<span><span class="va">CWIN_UP</span> <span class="op">&lt;-</span> <span class="fu">newConstraintS</span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CWIN_UP"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"&lt;="</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"capacity"</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"EWIN_"</span>, <span class="va">win_max_GW</span><span class="op">$</span><span class="va">af120m_class</span><span class="op">)</span>,</span>
<span>    region <span class="op">=</span> <span class="va">win_max_GW</span><span class="op">$</span><span class="va">region</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    tech <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"EWIN_"</span>, <span class="va">win_max_GW</span><span class="op">$</span><span class="va">af120m_class</span><span class="op">)</span>,</span>
<span>    region <span class="op">=</span> <span class="va">win_max_GW</span><span class="op">$</span><span class="va">region</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fl">0.1</span> <span class="op">*</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">win_max_GW</span><span class="op">$</span><span class="va">max_GW</span>, <span class="fl">1e-20</span><span class="op">)</span> <span class="co"># up to 10% of territory per region</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span> <span class="co"># to avoid dropping zeros in some solvers</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="commodities">Commodities<a class="anchor" aria-label="anchor" href="#commodities"></a>
</h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ELC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span><span class="st">"ELC"</span>, timeframe <span class="op">=</span> <span class="st">"HOUR"</span><span class="op">)</span></span>
<span><span class="va">CO2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span><span class="st">"CO2"</span>, timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span><span class="op">)</span></span>
<span><span class="va">SOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span><span class="st">"SOL"</span>, timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span><span class="op">)</span></span>
<span><span class="va">WIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span><span class="st">"WIN"</span>, timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span><span class="op">)</span></span>
<span><span class="va">WIF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span><span class="st">"WIF"</span>, timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">UHV</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"UHV"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Ultra High Voltage electricity"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"HOUR"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">COA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"COA"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"All coals"</span>,</span>
<span>  <span class="co"># emis = list( #</span></span>
<span>  <span class="co">#   comm = "CO2", #</span></span>
<span>  <span class="co">#   unit = "kt/GWh", #</span></span>
<span>  <span class="co">#   mean = convert("kt/PJ", "kt/GWh", 100) #</span></span>
<span>  <span class="co"># ),</span></span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">GAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"GAS"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Natural gas"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">BIO</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"BIO"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Biomass"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">HYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"HYD"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Hydro energy"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"YDAY"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># DAM &lt;- newCommodity(</span></span>
<span><span class="co">#   name = 'DAM',</span></span>
<span><span class="co">#   desc = "Hydro energy from Dam", # Auxiliary/artificial</span></span>
<span><span class="co">#   timeframe = "YDAY")</span></span>
<span></span>
<span></span>
<span><span class="va">NUC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/commodity.html" class="external-link">newCommodity</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"NUC"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Nuclear energy"</span>,</span>
<span>  timeframe <span class="op">=</span> <span class="st">"ANNUAL"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="demand">Demand<a class="anchor" aria-label="anchor" href="#demand"></a>
</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dem_baseYear</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">load_curve</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">==</span> <span class="va">baseYear</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># projected demand growth</span></span>
<span><span class="va">dem_last_year</span> <span class="op">&lt;-</span> <span class="va">dem_baseYear</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="fl">2070</span>, </span>
<span>    MWh <span class="op">=</span> <span class="fl">5</span> <span class="op">*</span> <span class="va">MWh</span><span class="op">)</span> <span class="co"># assume 5X growth from 2019 to 2070</span></span>
<span><span class="va">dem_modYear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">dem_baseYear</span>, <span class="va">dem_last_year</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Demand class repository </span></span>
<span><span class="va">DEM_ELC_DH</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/demand.html" class="external-link">newDemand</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"DEM_ELC_DH"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Demand by hours and year-days, full year"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>  dem <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    year <span class="op">=</span> <span class="va">dem_modYear</span><span class="op">$</span><span class="va">year</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">dem_modYear</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    dem <span class="op">=</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/math-generics.html" class="external-link">round</a></span><span class="op">(</span><span class="va">dem_modYear</span><span class="op">$</span><span class="va">MWh</span> <span class="op">/</span> <span class="fl">1e3</span>, <span class="fl">3</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">DEM_ELC_DH</span><span class="op">@</span><span class="va">dem</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 17472     4</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">DEM_ELC_DH</span><span class="op">@</span><span class="va">dem</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">/</span> <span class="fl">365</span> <span class="op">/</span> <span class="fl">24</span></span>
<span><span class="co">#&gt; [1] 1.994521</span></span>
<span></span>
<span><span class="co"># DEM_ELC_DH@dem[is.na(DEM_ELC_DH@dem$dem), ] # check for missing values</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="supply">Supply<a class="anchor" aria-label="anchor" href="#supply"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">RES_SOL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"RES_SOL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Terrestrial solar radiation"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"SOL"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">RES_WIN</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"RES_WIN"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Onshore wind"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"WIN"</span>,</span>
<span>  <span class="co"># region = unique(wnd_af10$region),</span></span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># RES_WFF &lt;- newSupply(</span></span>
<span><span class="co">#   name = "RES_WFF",</span></span>
<span><span class="co">#   desc = "Offshore wind - maximum potential",</span></span>
<span><span class="co">#   commodity = "WFF",</span></span>
<span><span class="co">#   region = unique(wndf_af10$region),</span></span>
<span><span class="co">#   unit = "GWh",</span></span>
<span><span class="co">#   slice = "ANNUAL"</span></span>
<span><span class="co"># )</span></span>
<span></span>
<span><span class="va">RES_HYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"RES_HYD"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Hydro-resource"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"HYD"</span>,</span>
<span>  <span class="co"># slice = "YDAY",</span></span>
<span>  weather <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    weather <span class="op">=</span> <span class="st">"WHYD_AF"</span>,</span>
<span>    wava.fx <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ava.fx <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">SUPNUC</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUPNUC"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"NUC"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"GWh"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># ava.up = convert("GWh", "PJ", 20*24*365),</span></span>
<span>    <span class="co"># http://www.world-nuclear.org/information-library/economic-aspects/economics-of-nuclear-power.aspx</span></span>
<span>    cost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kWh"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">.39</span> <span class="op">/</span> <span class="fl">100</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">SUPCOA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUPCOA"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"COA"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Simplified coal supply"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># cost = convert("USD/tce", "MUSD/GWh", 70 / .7)</span></span>
<span>    cost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/tce"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">6000</span> <span class="op">*</span> <span class="va">INR_2_USD</span> <span class="op">/</span> <span class="fl">0.7</span><span class="op">)</span> <span class="co"># 0.7 tone -&gt; tce</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># 1,000 Cubic Feet Of Natural Gas to Therms (u.s.) = 10.0024</span></span>
<span><span class="co"># 4 USD/cu.ft ~= 0.4 USD/therm</span></span>
<span><span class="va">SUPGAS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUPGAS"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Simplified gas supply"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"GAS"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    cost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/therm"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">SUPOIL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUPOIL"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Simplified oil supply"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"OIL"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    cost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/therm"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">0.5</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">SUPBIO</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/sypply.html" class="external-link">newSupply</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"SUPBIO"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Simplified Biomass supply"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"BIO"</span>,</span>
<span>  availability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    cost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/therm"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">0.4</span><span class="op">)</span> <span class="co"># assumption</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="co"># slice = "ANNUAL"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="energy-storage">Energy storage<a class="anchor" aria-label="anchor" href="#energy-storage"></a>
</h2>
<div class="section level3">
<h3 id="hydro-reservoirs">Hydro reservoirs<a class="anchor" aria-label="anchor" href="#hydro-reservoirs"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">generation_hourly</span> <span class="op">&lt;-</span> <span class="va">ideea_data</span><span class="op">$</span><span class="va">karnataka</span><span class="op">$</span><span class="va">generation_hourly</span></span>
<span><span class="co"># w_hyd</span></span>
<span><span class="co"># summary(w_hyd$DISCHARGE_MU)</span></span>
<span><span class="co"># summary(w_hyd$INFLOW_MU)</span></span>
<span><span class="co"># summary(w_hyd$EQENERGY_MU)</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># sum(w_hyd$DISCHARGE_MU)</span></span>
<span><span class="co"># sum(w_hyd$INFLOW_MU)</span></span>
<span><span class="co"># sum(w_hyd$EQENERGY_MU)</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># </span></span>
<span><span class="co"># ii &lt;- grepl("(d001)|(d365)", w_hyd$slice)</span></span>
<span><span class="co"># sum(ii)</span></span>
<span><span class="co"># w_hyd[ii, ]</span></span>
<span><span class="co"># </span></span>
<span><span class="va">STGHYD_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  stock <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">EQENERGY_MU</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  cout.up <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">DISCHARGE_MU</span><span class="op">)</span> <span class="op">/</span> <span class="va">stock</span> <span class="op">*</span> <span class="fl">365</span> <span class="co"># annual generation per GW of storage capacity</span></span>
<span><span class="op">)</span></span>
<span><span class="va">STGHYD_dat</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 2</span></span></span>
<span><span class="co">#&gt;   stock cout.up</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> <span style="text-decoration: underline;">8</span>424.    10.1</span></span>
<span></span>
<span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"(d001)"</span>, <span class="va">w_hyd</span><span class="op">$</span><span class="va">slice</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">ii</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="va">STGHYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/storage.html" class="external-link">newStorage</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"STGHYD"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"HYD"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Hydro reservoirs"</span>,</span>
<span>  cap2stg <span class="op">=</span> <span class="fl">1</span>, <span class="co">#</span></span>
<span>  <span class="co"># aux = list(acomm = "DAM"),</span></span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>olife <span class="op">=</span> <span class="fl">25</span><span class="op">)</span>,</span>
<span>  <span class="co"># invcost = list(</span></span>
<span>  <span class="co">#   # See IRENA 2030 (from 77 to 574, p.77)</span></span>
<span>  <span class="co">#   invcost = convert("USD/kWh", "MUSD/GWh", 200)</span></span>
<span>  <span class="co">#   ),</span></span>
<span>  af <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># inpeff = .99, # assumed efficiency of charging</span></span>
<span>    <span class="co"># stgeff = .99, # assumed efficiency of storing energy (annual)</span></span>
<span>    <span class="co"># outeff = .99, # discharge efficiency</span></span>
<span>    cout.up <span class="op">=</span> <span class="va">STGHYD_dat</span><span class="op">$</span><span class="va">cout.up</span> <span class="op">*</span> <span class="va">hyd_adj</span></span>
<span>    <span class="co"># cout.up = 12.1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># aeff = data.frame(</span></span>
<span>  <span class="co">#   acomm = "DAM",</span></span>
<span>  <span class="co">#   out2aout = 1</span></span>
<span>  <span class="co"># ),</span></span>
<span>  capacity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    stock <span class="op">=</span> <span class="va">STGHYD_dat</span><span class="op">$</span><span class="va">stock</span> <span class="op">*</span> <span class="va">hyd_adj</span></span>
<span>    <span class="co"># slice = w_hyd$slice[ii],</span></span>
<span>    <span class="co"># charge = w_hyd$EQENERGY_MU[ii]</span></span>
<span>  <span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">2010</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># WHYD_AF1 &lt;- WHYD_AF</span></span>
<span><span class="co"># WHYD_AF1@weather$wval[1] &lt;- w_hyd$EQENERGY_MU[ii]</span></span>
<span></span>
<span><span class="va">CHYD2DAM</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CHYD2DAM"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">calendars</span><span class="op">$</span><span class="va">calendar_d365_h24</span><span class="op">@</span><span class="va">timeframes</span><span class="op">$</span><span class="va">YDAY</span></span>
<span>  <span class="op">)</span>,</span>
<span>  tr1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vSupOut"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>sup <span class="op">=</span> <span class="st">"RES_HYD"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  tr2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vStorageInp"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stg <span class="op">=</span> <span class="st">"STGHYD"</span><span class="op">)</span>, mult <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = rep(modYears, each = length(timeslices365$YDAY)),</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">calendars</span><span class="op">$</span><span class="va">calendar_d365_h24</span><span class="op">@</span><span class="va">timeframes</span><span class="op">$</span><span class="va">YDAY</span>,</span>
<span>    <span class="co"># slice = rep(timeslices365$YDAY, length(modYears)),</span></span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-20</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">CDAM2EHYD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CDAM2EHYD"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span></span>
<span>    <span class="co"># slice = timeslices365$YDAY</span></span>
<span>  <span class="op">)</span>,</span>
<span>  tr1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vStorageOut"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stg <span class="op">=</span> <span class="st">"STGHYD"</span>,</span>
<span>                   <span class="va">ideea_modules</span><span class="op">$</span><span class="va">time_tables</span><span class="op">$</span><span class="va">d365_h24</span><span class="op">$</span><span class="va">YDAY</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  tr2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechInp"</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>tech <span class="op">=</span> <span class="st">"EHYD"</span>,</span>
<span>                   <span class="va">ideea_modules</span><span class="op">$</span><span class="va">time_tables</span><span class="op">$</span><span class="va">d365_h24</span><span class="op">$</span><span class="va">YDAY</span><span class="op">)</span>, </span>
<span>    mult <span class="op">=</span> <span class="op">-</span><span class="fl">1</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = rep(modYears, each = length(timeslices365$YDAY)),</span></span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    <span class="co"># slice = rep(timeslices365$YDAY, length(modYears)),</span></span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-20</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">CHYDLEV</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CHYDLEV"</span>,</span>
<span>  for.each <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">calendars</span><span class="op">$</span><span class="va">calendar_d365_h24</span><span class="op">@</span><span class="va">timeframes</span><span class="op">$</span><span class="va">YDAY</span></span>
<span>    <span class="op">)</span>,</span>
<span>  vrb <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">'vStorageStore'</span>,</span>
<span>    for.sum <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>stg <span class="op">=</span> <span class="st">'STGHYD'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"&gt;="</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    <span class="co"># year = modYears,</span></span>
<span>    year <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>    region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>    slice <span class="op">=</span> <span class="va">ideea_modules</span><span class="op">$</span><span class="va">calendars</span><span class="op">$</span><span class="va">calendar_d365_h24</span><span class="op">@</span><span class="va">timeframes</span><span class="op">$</span><span class="va">YDAY</span>,</span>
<span>    rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">w_hyd</span><span class="op">$</span><span class="va">EQENERGY_MU</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-20</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="batteries">Batteries<a class="anchor" aria-label="anchor" href="#batteries"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">STGBTR</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/storage.html" class="external-link">newStorage</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"STGBTR"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Generic grid-integrated intraday storage (battery)"</span>,</span>
<span>  cap2stg <span class="op">=</span> <span class="fl">1</span>, <span class="co">#</span></span>
<span>  olife <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>olife <span class="op">=</span> <span class="fl">25</span><span class="op">)</span>,</span>
<span>  end <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>end <span class="op">=</span> <span class="va">baseYear</span><span class="op">)</span>,</span>
<span>  invcost <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="co"># See IRENA 2030 (from 77 to 574, p.77)</span></span>
<span>    invcost <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kWh"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">300</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  seff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    inpeff <span class="op">=</span> <span class="fl">0.8</span> <span class="co"># assumed efficiency of charging</span></span>
<span>    <span class="co"># stgeff = 0.9 # assumed efficiency of storing energy (annual)</span></span>
<span>    <span class="co"># outeff = 1 # discharge efficiency</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># STGBTR@varom</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="trade">Trade<a class="anchor" aria-label="anchor" href="#trade"></a>
</h2>
<p>(interregional export/import, exogenous)</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">EIMP1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newImport.html" class="external-link">newImport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EIMP"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Demand curtailments, electricity import at high price (to identify needs for back-up techs such as biomass)"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  imp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    price <span class="op">=</span> <span class="fu">convert</span><span class="op">(</span><span class="st">"USD/kWh"</span>, <span class="st">"MUSD/GWh"</span>, <span class="fl">1</span><span class="op">)</span> <span class="co"># USD per kWh, marginal price</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">EIMP01</span> <span class="op">&lt;-</span> <span class="va">EIMP1</span></span>
<span><span class="va">EIMP01</span><span class="op">@</span><span class="va">imp</span><span class="op">$</span><span class="va">price</span> <span class="op">&lt;-</span> <span class="fl">.1</span> <span class="op">*</span> <span class="va">EIMP1</span><span class="op">@</span><span class="va">imp</span><span class="op">$</span><span class="va">price</span></span>
<span></span>
<span><span class="va">EIMP10</span> <span class="op">&lt;-</span> <span class="va">EIMP1</span></span>
<span><span class="va">EIMP10</span><span class="op">@</span><span class="va">imp</span><span class="op">$</span><span class="va">price</span> <span class="op">&lt;-</span> <span class="fl">10</span> <span class="op">*</span> <span class="va">EIMP1</span><span class="op">@</span><span class="va">imp</span><span class="op">$</span><span class="va">price</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">gen_cap</span><span class="op">$</span><span class="va">enSource</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Biomass"    "Hydro"      "Net_Import" "Solar"      "Thermal"   </span></span>
<span><span class="co">#&gt; [6] "Wind"</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">generation_hourly</span><span class="op">$</span><span class="va">type</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "biomass" "export"  "hydro"   "import"  "solar"   "thermal" "wind"</span></span>
<span><span class="va">ii</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdatatable.gitlab.io/data.table/reference/IDateTime.html" class="external-link">year</a></span><span class="op">(</span><span class="va">generation_hourly</span><span class="op">$</span><span class="va">date</span><span class="op">)</span> <span class="op"><a href="https://rspatial.github.io/terra/reference/match.html" class="external-link">%in%</a></span> <span class="va">baseYear</span> <span class="op">&amp;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"(ex|im)port"</span>, <span class="va">generation_hourly</span><span class="op">$</span><span class="va">type</span>, ignore.case <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">generation_hourly</span><span class="op">[</span><span class="va">ii</span>, <span class="op">]</span><span class="op">$</span><span class="va">type</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "export" "import"</span></span>
<span><span class="va">generation_hourly</span><span class="op">[</span><span class="va">ii</span>, <span class="op">]</span></span>
<span><span class="co">#&gt;                       date  hour   type      GWh</span></span>
<span><span class="co">#&gt;                     &lt;POSc&gt; &lt;int&gt; &lt;char&gt;    &lt;num&gt;</span></span>
<span><span class="co">#&gt;     1: 2019-01-01 00:00:00     1 export -1.39000</span></span>
<span><span class="co">#&gt;     2: 2019-01-01 00:00:00     1 import  3.46824</span></span>
<span><span class="co">#&gt;     3: 2019-01-01 01:00:00     2 export -1.38100</span></span>
<span><span class="co">#&gt;     4: 2019-01-01 01:00:00     2 import  3.38224</span></span>
<span><span class="co">#&gt;     5: 2019-01-01 02:00:00     3 export -1.42700</span></span>
<span><span class="co">#&gt;    ---                                          </span></span>
<span><span class="co">#&gt; 17516: 2019-12-31 21:00:00    22 import  4.11719</span></span>
<span><span class="co">#&gt; 17517: 2019-12-31 22:00:00    23 export -1.71200</span></span>
<span><span class="co">#&gt; 17518: 2019-12-31 22:00:00    23 import  3.99319</span></span>
<span><span class="co">#&gt; 17519: 2019-12-31 23:00:00    24 export -1.73500</span></span>
<span><span class="co">#&gt; 17520: 2019-12-31 23:00:00    24 import  3.83219</span></span>
<span></span>
<span><span class="va">trade</span> <span class="op">&lt;-</span> <span class="va">generation_hourly</span><span class="op">[</span><span class="va">ii</span>, <span class="op">]</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">type</span>, values_from <span class="op">=</span> <span class="va">GWh</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>slice <span class="op">=</span> <span class="fu">dtm2tsl</span><span class="op">(</span><span class="va">date</span><span class="op">)</span>, .before <span class="op">=</span> <span class="va">hour</span><span class="op">)</span></span>
<span></span>
<span><span class="va">IMPORT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newImport.html" class="external-link">newImport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"IMPORT"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  imp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="va">trade</span><span class="op">$</span><span class="va">slice</span>,</span>
<span>    imp.fx <span class="op">=</span> <span class="va">trade</span><span class="op">$</span><span class="va">import</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">IMPORT</span><span class="op">@</span><span class="va">imp</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8760    7</span></span>
<span></span>
<span><span class="va">EXPORT</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newExport.html" class="external-link">newExport</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"EXPORT"</span>,</span>
<span>  commodity <span class="op">=</span> <span class="st">"ELC"</span>,</span>
<span>  exp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    slice <span class="op">=</span> <span class="va">trade</span><span class="op">$</span><span class="va">slice</span>, </span>
<span>    exp.fx <span class="op">=</span> <span class="op">-</span><span class="va">trade</span><span class="op">$</span><span class="va">export</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">EXPORT</span><span class="op">@</span><span class="va">exp</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8760    7</span></span></code></pre></div>
<div class="section level3">
<h3 id="additional-constraints">Additional constraints<a class="anchor" aria-label="anchor" href="#additional-constraints"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># No new capacity</span></span>
<span><span class="va">CNCAP0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newConstraint.html" class="external-link">newConstraint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"CNCAP0"</span>,</span>
<span>  eq <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>  <span class="co"># for.each = data.frame(</span></span>
<span>  <span class="co">#   # year = modYears,</span></span>
<span>  <span class="co">#   # tech = "ESOL",</span></span>
<span>  <span class="co">#   region = "KA"</span></span>
<span>  <span class="co"># ),</span></span>
<span>  tr1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    variable <span class="op">=</span> <span class="st">"vTechNewCap"</span></span>
<span>    <span class="co"># for.sum = list(sup = "RES_HYD")</span></span>
<span>  <span class="op">)</span>,</span>
<span>  rhs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    rhs <span class="op">=</span> <span class="fl">1e-100</span></span>
<span>  <span class="op">)</span>,</span>
<span>  defVal <span class="op">=</span> <span class="fl">1e-100</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="the-model">The model<a class="anchor" aria-label="anchor" href="#the-model"></a>
</h2>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Repository with all the data-objects</span></span>
<span><span class="va">reps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newRepository.html" class="external-link">newRepository</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"main_repository"</span>,</span>
<span>  <span class="co"># Commodities</span></span>
<span>  <span class="va">ELC</span>, <span class="va">SOL</span>, <span class="va">WIN</span>, <span class="va">HYD</span>, <span class="va">COA</span>, <span class="va">CO2</span>, <span class="co"># DAM, WIF, </span></span>
<span>  <span class="co"># Resources (supply)</span></span>
<span>  <span class="va">RES_SOL</span>, <span class="va">RES_WIN</span>, <span class="va">RES_HYD</span>,</span>
<span>  <span class="va">SUPCOA</span>,</span>
<span>  <span class="co"># SUPBIO,</span></span>
<span>  <span class="co"># Weather factors</span></span>
<span>  <span class="va">WHYD_AF</span>,</span>
<span>  <span class="va">WSOL_mean</span>, </span>
<span>  <span class="va">WWIN_120m</span>,</span>
<span>  <span class="co"># Generating technologies</span></span>
<span>  <span class="va">ESOL</span>, </span>
<span>  <span class="co"># EWIN,</span></span>
<span>  <span class="va">EWIN_120m</span>,</span>
<span>  <span class="co"># ESOL_repo@data[[1]],</span></span>
<span>  <span class="co"># EWIN_repo@data[[1]],</span></span>
<span>  <span class="va">EHYD</span>,</span>
<span>  <span class="va">ECOA</span>,</span>
<span>  <span class="co"># Storage</span></span>
<span>  <span class="va">STGHYD</span>,</span>
<span>  <span class="va">STGBTR</span>,</span>
<span>  <span class="va">CHYDLEV</span>,</span>
<span>  <span class="co"># Exogenous interregional trade</span></span>
<span>  <span class="va">IMPORT</span>,</span>
<span>  <span class="va">EXPORT</span>,</span>
<span>  <span class="co"># Hydro dam operation constraints</span></span>
<span>  <span class="va">CHYD2DAM</span>,</span>
<span>  <span class="va">CDAM2EHYD</span>,</span>
<span>  <span class="co"># demand</span></span>
<span>  <span class="va">DEM_ELC_DH</span>,</span>
<span>  <span class="co"># curtailing demand in case of high marginal costs</span></span>
<span>  <span class="va">EIMP10</span> </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">reps</span><span class="op">)</span></span>
<span><span class="co">#&gt;  commodity constraint     demand     export     import    storage     supply </span></span>
<span><span class="co">#&gt;          6          3          1          1          2          2          4 </span></span>
<span><span class="co">#&gt; technology    weather </span></span>
<span><span class="co">#&gt;          8          7</span></span>
<span><span class="fu"><a href="https://rspatial.github.io/terra/reference/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">reps</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "ELC"        "SOL"        "WIN"        "HYD"        "COA"       </span></span>
<span><span class="co">#&gt;  [6] "CO2"        "RES_SOL"    "RES_WIN"    "RES_HYD"    "SUPCOA"    </span></span>
<span><span class="co">#&gt; [11] "WHYD_AF"    "WSOL"       "WWIN_AF20"  "WWIN_AF25"  "WWIN_AF15" </span></span>
<span><span class="co">#&gt; [16] "WWIN_AF30"  "WWIN_AF35"  "ESOL"       "EWIN_AF20"  "EWIN_AF25" </span></span>
<span><span class="co">#&gt; [21] "EWIN_AF15"  "EWIN_AF30"  "EWIN_AF35"  "EHYD"       "ECOA"      </span></span>
<span><span class="co">#&gt; [26] "STGHYD"     "STGBTR"     "CHYDLEV"    "IMPORT"     "EXPORT"    </span></span>
<span><span class="co">#&gt; [31] "CHYD2DAM"   "CDAM2EHYD"  "DEM_ELC_DH" "EIMP"</span></span>
<span></span>
<span><span class="va">full_calendar_d365_h24</span> <span class="op">&lt;-</span> <span class="fu">IDEEA</span><span class="fu">::</span><span class="va"><a href="../reference/ideea_modules.html">ideea_modules</a></span><span class="op">$</span><span class="va">calendars</span><span class="op">$</span><span class="va">calendar_d365_h24</span></span>
<span></span>
<span><span class="co"># model-class object</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/newModel.html" class="external-link">newModel</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>  desc <span class="op">=</span> <span class="st">"Karnataka electricity model"</span>,</span>
<span>  <span class="co">## in case of infeasibility, `dummy` variables can be added</span></span>
<span>  <span class="co"># debug = data.frame(#comm = "ELC",</span></span>
<span>  <span class="co">#                    dummyImport = 1e6,</span></span>
<span>  <span class="co">#                    dummyExport = 1e6),</span></span>
<span>  region <span class="op">=</span> <span class="st">"KA"</span>,</span>
<span>  discount <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  calendar <span class="op">=</span> <span class="va">full_calendar_d365_h24</span>,</span>
<span>  horizon <span class="op">=</span> <span class="fu"><a href="https://energyRt.org/reference/horizon.html" class="external-link">newHorizon</a></span><span class="op">(</span>period <span class="op">=</span> <span class="va">baseYear</span><span class="op">:</span><span class="fl">2070</span>, </span>
<span>                       intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">8</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                       mid_is_end <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">reps</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># check model horizon</span></span>
<span><span class="co"># getHorizon(mod)</span></span>
<span></span>
<span><span class="co"># (optional) the model info</span></span>
<span><span class="op">{</span><span class="va">mod</span><span class="op">@</span><span class="va">desc</span> <span class="op">&lt;-</span> <span class="st">"</span></span>
<span><span class="st">Karnataka power sector, renewables balancing version,</span></span>
<span><span class="st">1 region, 1 hour resolution,</span></span>
<span><span class="st">3 types of renewables, </span></span>
<span><span class="st">2 types of storages."</span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="scenarios">Scenarios<a class="anchor" aria-label="anchor" href="#scenarios"></a>
</h2>
<div class="section level3">
<h3 id="base-year-check">Base-year check<a class="anchor" aria-label="anchor" href="#base-year-check"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># set_progress_bar("progress")</span></span>
<span><span class="fu"><a href="https://energyRt.org/reference/progress.html" class="external-link">set_progress_bar</a></span><span class="op">(</span><span class="st">"bw"</span><span class="op">)</span></span>
<span><span class="co"># 1. Interpolation of parameters</span></span>
<span><span class="co"># scen_KA_1Y &lt;- interpolate_model(mod, name = "scen_KA_1Y", desc = "")</span></span>
<span><span class="va">horizon_BY</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/horizon.html" class="external-link">newHorizon</a></span><span class="op">(</span>period <span class="op">=</span> <span class="va">baseYear</span>, intervals <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co"># getHorizon(mod)</span></span>
<span><span class="va">scen_KA_1Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rspatial.github.io/terra/reference/interpolate.html" class="external-link">interpolate</a></span><span class="op">(</span><span class="va">mod</span>, name <span class="op">=</span> <span class="st">"scen_KA_1Y"</span>, <span class="va">CNCAP0</span>, <span class="va">horizon_BY</span><span class="op">)</span></span>
<span><span class="co"># scen_KA_1Y@path</span></span>
<span></span>
<span><span class="va">scen_KA_1Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/write.html" class="external-link">write_script</a></span><span class="op">(</span></span>
<span>  <span class="va">scen_KA_1Y</span>, </span>
<span>  solver <span class="op">=</span> <span class="va">solver_options</span><span class="op">$</span><span class="va">julia_highs</span></span>
<span>  <span class="co"># solver = solver_options$gams_gdx_cplex_parallel</span></span>
<span>  <span class="op">)</span> </span>
<span><span class="co"># scen_KA_1Y@misc$tmp.dir</span></span>
<span><span class="va">scen_KA_1Y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://energyRt.org/reference/solve.html" class="external-link">solve_scenario</a></span><span class="op">(</span><span class="va">scen_KA_1Y</span>, wait <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="va">scen_KA_1Y</span> <span class="op">&lt;-</span> <span class="fu">read</span><span class="op">(</span><span class="va">scen_KA_1Y</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save Karnataka model to IDEEA repository</span></span></code></pre></div>
<p>tbc…</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by IDEEA comunity.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
